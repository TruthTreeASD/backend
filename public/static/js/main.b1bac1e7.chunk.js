(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},234:function(e,t,a){e.exports=a.p+"static/media/truthtree-logo.75b56fb9.png"},236:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},243:function(e,t,a){e.exports=a(495)},252:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},331:function(e,t,a){},35:function(e,t){e.exports={TRUTHTREE_URI:"https://truthtree.herokuapp.com"}},457:function(e,t,a){},490:function(e,t,a){},494:function(e,t,a){},495:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(22),l=a.n(o),i=a(34),c=a(67),s=a(213),u=a(50),d=Object(c.c)({FilterByReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dimension:"State"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DIMENSION":return Object(u.a)({},e,{dimension:t.value});default:return e}},AttributeRangeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeName:["Population"],populationRange:[-50,50]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RANGE_SELECTION":return Object(u.a)({},e,{populationRange:t.populationRange});default:return e}},SelectedAttributeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebarData:[],selectedAttributes:[]},t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"CHANGE_ATTRIBUTE":return Object(u.a)({},e,{selectedAttributes:Array.from(t.value)});default:return e}},YearSelectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{yearSelected:2016},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_YEAR":e=Object(u.a)({},e,{yearSelected:t.yearSelected});break;default:return e}return e},LocationSearchBoxReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCHBOX_UPDATE_VALUE":return Object(u.a)({},e,{value:t.payload});default:return e}}});for(var p=a(14),m=a(15),h=a(17),b=a(16),f=a(18),y=a(527),g=a(529),v=a(524),E=a(507),O=a(508),T=a(512),j=(a(252),a(505)),k=a(511),S=a(506),A=a(31),R=a(30),C=a.n(R),N=a(36),w=a.n(N),x=(a(271),a(35)),I=a(501),D=(a(158),a(497)),_=a(498),L=a(499),U=a(500),z=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={dropdownOpen:!1,selectedNormalization:"Gross",normalizationValues:[]},a.normalizationValuesCall=a.normalizationValuesCall.bind(Object(A.a)(a)),a.toggle=a.toggle.bind(Object(A.a)(a)),a.setSelectedNormalization=a.setSelectedNormalization.bind(Object(A.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.normalizationValuesCall()}},{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"setSelectedNormalization",value:function(e){this.setState(function(t){return{selectedNormalization:e}})}},{key:"normalizationValuesCall",value:function(){var e=this;C.a.get("".concat(x.TRUTHTREE_URI,"/api/normalization_types")).then(function(t){console.log(t.data),e.setState({normalizationValues:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"normalisation"},"Normalization attribute:",r.a.createElement(D.a,{id:"dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(_.a,{caret:!0},this.state.selectedNormalization),r.a.createElement(L.a,null,r.a.createElement(U.a,{onClick:function(){return e.setSelectedNormalization("Gross")}},"Gross"),r.a.createElement(U.a,{onClick:function(){return e.setSelectedNormalization("Per Capita")}},"Per Capita"),r.a.createElement(U.a,{onClick:function(){return e.setSelectedNormalization("Per Revenue")}},"Per Revenue"))))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={currentLevel:null,data:{},locationIds:[],selectedAttributes:[],year:2016},a.getAttributeType=a.getAttributeType.bind(Object(A.a)(a)),a.populationRangeCall=a.populationRangeCall.bind(Object(A.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({selectedAttributes:e.selectedAttributes,year:e.year});var a=w.a.flatMap(e.selectedAttributes,function(e){return e[0]});a.length>0&&C.a.get("/api/attributes?locationIds="+this.state.locationIds+"&attributeIds="+a+"&yearList="+e.year).then(function(e){var a=t.state.data;w.a.map(e.data,function(e){w.a.map(e.attributes,function(t){a[e.location_id][t.attribute_id]=t.data[0].value})}),t.setState({data:a})}).catch(function(e){console.log(e)}),this.populationRangeCall()}},{key:"getAttributeType",value:function(e){return w.a.flatMap(this.state.selectedAttributes,function(t){return"ids"===e?t[0]:t[1]})}},{key:"componentDidMount",value:function(){var e=this;this.setState(function(t){return{data:{},selectedAttribtes:e.props.selectedAttributes,year:e.props.yearSelected}}),this.populationRangeCall()}},{key:"populationRangeCall",value:function(){var e=this,t=0,a=0,n={},r=[];C.a.get("".concat(x.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+this.state.year).then(function(o){var l=o.data.population;return a=Math.floor(l+e.props.populationRange[1]/100*l),t=Math.floor(l+e.props.populationRange[0]/100*l),C.a.get("".concat(x.TRUTHTREE_URI,"/api/states?populationRange=")+t+","+a).then(function(t){w.a.map(t.data,function(e){n[e.id]={name:e.name,1:e.population},r.push(e.id)}),e.setState({data:n}),e.setState({locationIds:r})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"mainDisplay"},r.a.createElement(z,null),r.a.createElement(I.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Population"),this.state.selectedAttributes.map(function(e,t){return r.a.createElement("th",{key:t},e[1])}))),r.a.createElement("tbody",null,w.a.values(this.state.data).map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t[1].toLocaleString()),e.state.selectedAttributes.map(function(a,n){var o="https://www.google.com/search?q="+t.name+"+"+e.state.selectedAttributes[n][1];return r.a.createElement("td",{key:n},r.a.createElement("a",{href:o,target:"_blank"},t[a[0]]?t[a[0]].toLocaleString():""))}))}))))}}]),t}(n.Component),H=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,populationRange:e.AttributeRangeReducer.populationRange}})(M),P=a(105),B=(a(272),a(216)),G=a(528),Y=(a(273),a(274),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).isAttributeSelected=function(e){for(var t=0;t<a.state.selectedAttributes.length;t++)if(a.state.selectedAttributes[t][0]===e)return!0;return!1},a.handleClickCollection=function(e){a.setState(Object(P.a)({},e,!a.state[e]))},a.handleChangeSearch=function(e){a.setState({searchedString:e.target.value.toLowerCase()}),a.state.searchedString},a.renderSearchTerm=function(e){if(""==a.state.searchedString||a.state.sidebarData[e].name.toLowerCase().search(a.state.searchedString)>-1)return!0;var t;for(t in a.state.sidebarData[e].attributes)if(a.state.sidebarData[e].attributes[t].name.toLowerCase().search(a.state.searchedString)>-1)return!0;return!1},a.state={sidebarData:[],isLoaded:!1,selectedAttributes:[],collapsedLeft:!1,searchedString:""},Object.keys(a.state.sidebarData).map(function(e){return a.state[e]=!1}),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(x.TRUTHTREE_URI,"/api/collections?locationId=")+this.props.match.params.id).then(function(t){e.setState({sidebarData:t.data,isLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"handleClickAttribute",value:function(e,t){for(var a=this,n=this.state.selectedAttributes,r=t.attribute_id,o=function(e){if(n[e][0]===r)return w.a.remove(n,function(t){return t===n[e]}),a.setState({selectedAttributes:n}),a.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n}),{v:void 0}},l=0;l<n.length;l++){var i=o(l);if("object"===typeof i)return i.v}n.length<10?(n.push([r,t.name,e]),this.setState({selectedAttributes:n}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n})):Object(B.confirmAlert)({title:"Error!",message:"Number of selected attributes exceeded limit of 10, please remove attributes to add more.",buttons:[{label:"OK"}]})}},{key:"collapseLeftBar",value:function(){this.setState({collapsedLeft:!this.state.collapsedLeft}),this.setState({searchedString:""})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?this.state.collapsedLeft?r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-right"})):r.a.createElement("nav",{className:"scrollLeftBar col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control leftSearch","data-spy":"affix","data-offset-top":"197",id:"attribute-search-box",onChange:this.handleChangeSearch,placeholder:"Property Lookup"})),r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),r.a.createElement("div",{style:{display:this.state.collapsedLeft?"none":"block"}},Object.keys(this.state.sidebarData).map(function(t,a){if(e.renderSearchTerm(t))return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"accordion",onClick:function(){return e.handleClickCollection(t)}},e.state.sidebarData[t].name),r.a.createElement("div",{style:{display:e.state[t]?"block":"none"}},Object.keys(e.state.sidebarData[t].attributes).map(function(a,n){return r.a.createElement("label",{onClick:function(){return e.handleClickAttribute(e.state.sidebarData[t].name,e.state.sidebarData[t].attributes[a])},key:n,className:"panel float-right",style:{background:e.isAttributeSelected(e.state.sidebarData[t].attributes[a].attribute_id)?"#d4f3c7":"white"}},r.a.createElement("div",null,e.state.sidebarData[t].attributes[a].name))})))}))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component)),V=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer}},function(e){return{dispatch:e}})(Object(G.a)(Y)),W={height:"200px",overflow:"auto"},q=[],F=1966;F<2016;F++)q.push(F+1);var K=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).toggle=a.toggle.bind(Object(A.a)(a)),a.state={dropdownOpen:!1,yearSelected:"2016"},a.onClick=a.onClick.bind(Object(A.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"onClick",value:function(e){console.log(e.target.id),this.props.dispatch({type:"CHANGE_YEAR",yearSelected:e.target.id})}},{key:"render",value:function(){var e=this,t=q.map(function(t,a){return r.a.createElement(U.a,{key:a,id:t,onClick:e.onClick},t)});return r.a.createElement("div",null,r.a.createElement("p",null," Select Year of Data to be displayed: "),r.a.createElement(D.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(_.a,{caret:!0},this.props.yearSelected),r.a.createElement(L.a,{style:W},t)))}}]),t}(n.Component),X=Object(i.b)(function(e){return{yearSelected:e.YearSelectorReducer.yearSelected}},function(e){return{dispatch:e}})(K),J=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={selectedAttributes:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedAttribtes:this.props.selectedAttributes}),console.log(this.state.selectedAttributes),console.log("it worked"+this.state.selectedAttributes)}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes}),console.log("got prop")}},{key:"deselectAttribute",value:function(e){var t=this;console.log("Clicked button");var a=this.state.selectedAttributes,n=e[0];console.log(e);for(var r=function(e){if(a[e][0]===n)return w.a.remove(a,function(t){return t===a[e]}),t.setState({selectedAttributes:a}),t.props.dispatch({type:"CHANGE_ATTRIBUTE",value:a}),{v:void 0}},o=0;o<a.length;o++){var l=r(o);if("object"===typeof l)return l.v}}},{key:"render",value:function(){var e=this;return this.state.selectedAttributes.length<1?r.a.createElement("div",null):r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"text-info",style:{padding:"10px",fontSize:"18px"}},"Selected Filters"),Object.keys(this.state.selectedAttributes).map(function(t,a){return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("button",{className:"btn btn-light",onClick:function(){return e.deselectAttribute(e.state.selectedAttributes[a])}},r.a.createElement("i",{className:"fa fa-times",style:{paddingRight:"10px"}}),e.state.selectedAttributes[a][1]))}))}}]),t}(n.Component),Z=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(J),$=a(240),Q=(a(329),a(330),a(331),$.a.Range),ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).onSliderChange=function(e){console.log(),a.props.dispatch({type:"RANGE_SELECTION",populationRange:e})},a.state={locationPopulation:null,value:[-5,5],min:-50,max:50},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.yearSelected?this.props.yearSelected:2016,a="".concat(x.TRUTHTREE_URI,"/api/population?locationId=")+this.props.locationId+"&year="+t;console.log(a);var n=null;C.a.get(a).then(function(t){n=t.data.population,console.log(t.data.population),e.setState({locationPopulation:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.attribute.attributeName.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("p",null,t," of ",e.props.location," ",":  "," ",r.a.createElement("b",null,e.state.locationPopulation)),r.a.createElement("p",null,"Select range of ",r.a.createElement("b",null,t)," for filtering other"," ",r.a.createElement("b",null,e.props.level),":"),r.a.createElement("p",{className:"Note"},"(*range selection available from -50% to +50% wrt to"," ",e.props.location," ",t,")"),r.a.createElement(Q,{dots:!0,step:5,value:e.props.attribute.populationRange,min:e.state.min,max:e.state.max,onChange:e.onSliderChange}),r.a.createElement("p",null,"Current selection: ",e.props.attribute.populationRange[0],"% to"," ",e.props.attribute.populationRange[1],"% :"))});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null," ",t," ")))}}]),t}(n.Component),te=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,attribute:e.AttributeRangeReducer}},function(e){return{dispatch:e}})(ee),ae=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.label;(0,e.onClick)(t)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tab-list-item";return a===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),t}(n.Component),ne=(a(172),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).onClickTabItem=function(e){a.setState({activeTab:e})},a.state={activeTab:a.props.children[0].props.label},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map(function(t){var n=t.props.label;return r.a.createElement(ae,{activeTab:a,key:n,label:n,onClick:e})})),r.a.createElement("div",{className:"tab-content"},t.map(function(e){if(e.props.label===a)return e.props.children})))}}]),t}(n.Component)),re=a(215),oe=a(502),le=a(526),ie=a(509),ce=a(510),se=a(504),ue=a(525),de=a(503),pe=a(232),me=a(233),he=a(117),be=a(89),fe=a(242),ye=(a(173),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.attributeName;return"large"===this.props.condition?r.a.createElement("div",{className:"chartDiv"},r.a.createElement(oe.a,{color:"info",className:"popupHeader"}," ",this.props.attributeName," vs Year"," "),r.a.createElement(ue.a,{width:1050,height:450,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(de.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(pe.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(me.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(he.a,null),r.a.createElement(be.a,{verticalAlign:"bottom",iconSize:10}),this.props.locations.map(function(e,t){return r.a.createElement(fe.a,{key:e.id,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})}))):r.a.createElement("div",{className:"chartDiv"},r.a.createElement(oe.a,{color:"info"}," ",this.props.attributeName," vs Year "),r.a.createElement(ue.a,{width:475,height:200,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(de.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(pe.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(me.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(he.a,null),this.props.locations.map(function(e,t){return r.a.createElement(fe.a,{key:e.id,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})})))}}]),t}(n.Component)),ge=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={loading:!0,locations:[],data:[],currentLevel:null,dataReal:[],locationIds:[],lineColors:["red","purple","green","blue","deeppink","orange","navy","olive","lime","indianred","dimgrey"]},a.fetchResponse=a.fetchResponse.bind(Object(A.a)(a)),a.formatResponse=a.formatResponse.bind(Object(A.a)(a)),a.initializeYearMap=a.initializeYearMap.bind(Object(A.a)(a)),a.fetchLocations=a.fetchLocations.bind(Object(A.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"componentWillReceiveProps",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"fetchLocations",value:function(){var e=this,t=0,a=0,n=[],r=this.props.yearSelected?this.props.yearSelected:2016;C.a.get("".concat(x.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+r).then(function(r){var o=r.data.population;return a=Math.floor(o+e.props.populationRange[1]/100*o),t=Math.floor(o+e.props.populationRange[0]/100*o),C.a.get("".concat(x.TRUTHTREE_URI,"/api/states?populationRange=")+t+","+a).then(function(t){w.a.map(t.data,function(e){n.push(e.id)}),e.setState({locationIds:n}),e.fetchResponse()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"fetchResponse",value:function(){var e=this,t="".concat(x.TRUTHTREE_URI,"/api/attributes?locationIds=")+this.state.locationIds+"&attributeIds="+this.props.selectedAttributes[this.props.index][0];C.a.get(t).then(function(t){e.formatResponse(t)}).catch(function(e){console.log(e)})}},{key:"formatResponse",value:function(e){var t=this,a=[],n=[],r={};e.data.map(function(e){var a={};e.attributes.map(function(o){o.data.map(function(a){var n=r[o.attribute_id];void 0===n&&(n=t.initializeYearMap());var l=n[a.year-1967];0!==l[e.location_id]&&void 0!==l[e.location_id]||(n[a.year-1967][e.location_id]=a.value),r[o.attribute_id]=n}),a.id=e.location_id;var l=t.state.lineColors[Math.floor(11*Math.random())];a.color=l,a.name=e.location_id,n.push(a)})}),a.push(r),this.setState({data:a,locations:n,loading:!1})}},{key:"initializeYearMap",value:function(){for(var e=[],t=1967;t<2017;t++){var a={year:t};e.push(a)}return e}},{key:"render",value:function(){var e=this,t=this.props.selectedAttributes.length,a=this.state.loading;return 0===t?r.a.createElement("div",null,"Select an attribute"):!0===a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(se.a,{className:"align-self-center",color:"secondary",size:"sm"})):this.state.data.map(function(t,a){return r.a.createElement(ye,{data:t[e.props.selectedAttributes[e.props.index][a]],attributeName:e.props.selectedAttributes[e.props.index][1],locations:e.state.locations,condition:e.props.condition})})}}]),t}(n.Component),ve=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,year:e.YearSelectorReducer.yearSelected,populationRange:e.AttributeRangeReducer.populationRange}})(ge),Ee=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).handExpandClick=function(e){return a.setState({modal:!0,modalAttrIndex:e})},a.state={modal:!1},a.modalToggle=a.modalToggle.bind(Object(A.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"getAttributeNames",value:function(e){return w.a.flatMap(this.props.selectedAttributes,function(t){return"name"===e?t[1]:t[0]})}},{key:"render",value:function(){var e=this,t=this.getAttributeNames("name"),a=t.length,n=t.map(function(t,a){return r.a.createElement(j.a,{key:a,sm:"8"},r.a.createElement(S.a,null,r.a.createElement(ve,{index:a,condition:"tiny",id:e.props.id}),r.a.createElement(re.a,{className:"button",color:"secondary",onClick:function(){return e.handExpandClick(a)}},r.a.createElement(oe.a,null,"Expand"))))});return 0===a?r.a.createElement(E.a,{className:"alert"}," ","Please select minimum of one attribute"," "):r.a.createElement(E.a,{className:"GridContainer"},r.a.createElement(O.a,null,n,r.a.createElement(le.a,{isOpen:this.state.modal,toggle:this.modalToggle,className:"GridModal"},r.a.createElement(ie.a,null,r.a.createElement(ve,{index:this.state.modalAttrIndex,condition:"large",id:this.props.id})),r.a.createElement(ce.a,null,r.a.createElement(re.a,{color:"secondary",onClick:this.modalToggle},"Cancel")))))}}]),t}(n.Component),Oe=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(Ee),Te={paddingTop:90},je=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{fluid:!0,style:Te},r.a.createElement(O.a,null,r.a.createElement(V,null),r.a.createElement("div",{className:"col-12 col-md-10 align-items-center"},r.a.createElement(j.a,null,r.a.createElement("div",{className:"attribute-selector-padding"},r.a.createElement(Z,null)),r.a.createElement(ne,null,r.a.createElement("div",{label:"Table View"},r.a.createElement(H,{level:this.props.match.params.level,id:this.props.match.params.id})),r.a.createElement("div",{label:"Time Series View"},r.a.createElement(Oe,{id:this.props.match.params.id})))),r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement("div",null,"Selected Location: ",r.a.createElement("b",null,this.props.match.params.name))),r.a.createElement(S.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a,{className:"border-right"},r.a.createElement(te,{level:this.props.match.params.level,location:this.props.match.params.name,locationId:this.props.match.params.id})),r.a.createElement(T.a,null,r.a.createElement(X,null))))))))}}]),t}(n.Component),ke=a(513),Se=a(514),Ae=a(516),Re=a(517),Ce=a(518),Ne=a(519),we=a(520),xe=a(515),Ie=a(234),De=a.n(Ie),_e={backgroundColor:"rgba(13, 22, 38, 0.8)"},Le={"&:hover":{textDecoration:"none"}},Ue={width:50},ze=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ke.a,{style:_e,expand:"md",className:"fixed-top"},r.a.createElement(Se.a,{className:"text-primary",style:Le},r.a.createElement(xe.a,{to:"/"},r.a.createElement("img",{src:De.a,style:Ue,className:"d-inline-block",alt:"TruthTree logo"})),"\xa0TruthTree"),r.a.createElement(Ae.a,{onClick:function(){return e.setState({collapseOpen:!e.state.collapseOpen})}}),r.a.createElement(Re.a,{isOpen:this.state.collapseOpen,navbar:!0},r.a.createElement(Ce.a,{className:"ml-auto",navbar:!0},r.a.createElement(Ne.a,null,r.a.createElement(we.a,{tag:xe.a,to:"/"},"Explore")),r.a.createElement(Ne.a,null,r.a.createElement(we.a,{tag:xe.a,to:"/about"},"About")))))}}]),t}(n.Component),Me=a(521),He=(a(457),{paddingTop:70}),Pe=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{fluid:!0,style:He,className:"about"},r.a.createElement(Me.a,{className:"float-center"},r.a.createElement("h1",{className:"display-3"},"TruthTree"),r.a.createElement("p",null,"A Public Data Vizipedia/Wiki-Laboratory"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",{className:"lead"},"TruthTree seeks to unite all the public data in the world into a data-visualization tool and reference platform that can facilitate data-driven understanding and consensus regarding geography, politics, and culture for geographical entities at all scales."),r.a.createElement("p",{className:"lead"})))}}]),t}(n.Component),Be=a(235),Ge=a.n(Be),Ye=a(236),Ve={height:"100%",width:"100%"},We=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={center:{lat:37.09024,lng:-95.712891},zoom:5},a.handleApiLoaded=function(e,t){e.setOptions({styles:Ye,fullscreenControlOptions:{position:t.ControlPosition.BOTTOM_RIGHT}})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Ve,className:"position-absolute"},r.a.createElement(Ge.a,{bootstrapURLKeys:{key:"AIzaSyD6S0fXIE22l64bV3nhv-EB-7K1gh39nqs"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}}))}}]),t}(n.Component),qe=a(241),Fe=a(522),Ke=a(523),Xe=a(116),Je=a.n(Xe),Ze=a(237),$e=a.n(Ze),Qe=function(e){return{type:"SEARCHBOX_UPDATE_VALUE",payload:e}},et={STATES:"".concat(x.TRUTHTREE_URI,"/api/states"),COUNTIES:"".concat(x.TRUTHTREE_URI,"/api/counties"),CITIES:"".concat(x.TRUTHTREE_URI,"/api/cities")},tt={0:"states",1:"counties",2:"cities"},at=function(e){return{threshold:.6,includeScore:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:e}},nt=function(e){return r.a.createElement("div",null,r.a.createElement(Fe.a,{style:{cursor:"pointer",color:"white"},for:"location-search-box"},"Search for a U.S location:"),r.a.createElement(Ke.a,Object.assign({},e,{id:"location-search-box",name:"location-search-box",placeholder:"Try something like Seattle or Boston"})))},rt=function(e){var t=e.containerProps,a=e.children;return r.a.createElement("div",Object.assign({style:{height:"5em"}},t),a)},ot=function(e){var t=e.item,a=t.name;return 1!==t.typeCode&&(a+=t.county?", ".concat(t.county):""),a+=t.stateAbbr?", ".concat(t.stateAbbr):""},lt=function(e){var t=e.item,a="/explore/".concat(tt[t.typeCode],"/").concat(t.name.toLowerCase().replace(" ","-"),"/").concat(t.id);return r.a.createElement(xe.a,{to:a},ot(e))},it=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e)))._parseData=function(e,t,n){var r=e.reduce(function(e,t){return e[t.state_code]=t,t.counties={},t.typeCode=0,e},{});t.forEach(function(e){var t=r[e.state_code];e.state=t.name,e.stateAbbr=t.abbreviation,e.typeCode=1,t.counties[e.county]=e}),n.forEach(function(e){var t=r[e.state_code],a=t.counties[e.county];t?(e.state=t.name,e.stateAbbr=t.abbreviation):(e.state=null,e.stateAbbr=null),e.county=a?a.name:null,e.typeCode=2});var o=at([{name:"abbreviation",weight:.3},{name:"name",weight:.7}]),l=at([{name:"name",weight:.6},{name:"state",weight:.3},{name:"stateAbbr",weight:.1}]),i=at([{name:"name",weight:.7},{name:"state",weight:.2},{name:"stateAbbr",weight:.05},{name:"county",weight:.05}]);a.setState({loading:!1,statesData:new Je.a(e,o),countiesData:new Je.a(t,l),citiesData:new Je.a(n,i)})},a.handleInputChange=function(e,t){var n=t.newValue;a.props.dispatch(Qe(n))},a.handleSuggestionsFetchRequested=function(e){var t=e.value,n=a.state.statesData.search(t),r=a.state.countiesData.search(t),o=a.state.citiesData.search(t),l=[].concat(n.slice(0,5),r.slice(0,5),o.slice(0,5));l.sort(function(e,t){return e.score-t.score}),a.setState({suggestions:l.slice(0,10)})},a.state={loading:!0,value:"",popoverOpen:!1,statesData:void 0,countiesData:void 0,citiesData:void 0,matchedStates:[],matchedCounties:[],matchedCities:[],suggestions:[]},a.timer=null,a.debouncedhandleSuggestionsFetchRequested=w.a.debounce(a.handleSuggestionsFetchRequested,250),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[Object(R.get)(et.STATES),Object(R.get)(et.COUNTIES),Object(R.get)(et.CITIES)];Promise.all(t).then(function(t){var a=Object(qe.a)(t,3),n=a[0],r=a[1],o=a[2];e._parseData(n.data,r.data,o.data)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.loading,a={value:this.props.value,onChange:this.handleInputChange};return r.a.createElement(E.a,null,r.a.createElement(O.a,{className:"py-3"},t?r.a.createElement(T.a,{className:"d-flex justify-content-center"},r.a.createElement(se.a,{className:"align-self-center",color:"primary"})):r.a.createElement(T.a,null,r.a.createElement($e.a,{theme:{container:"position-relative",suggestionsList:"list-group position-absolute w-100 overflow-y",suggestion:"list-group-item"},suggestions:this.state.suggestions,alwaysRenderSuggestions:!0,onSuggestionsClearRequested:function(){return e.setState({suggestions:[]})},onSuggestionsFetchRequested:this.debouncedhandleSuggestionsFetchRequested,getSuggestionValue:ot,renderInputComponent:nt,renderSuggestionsContainer:rt,renderSuggestion:lt,inputProps:a}))))}}]),t}(n.Component),ct=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value}})(Object(G.a)(it)),st=a(238),ut=a.n(st),dt={color:"white"},pt=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a,{style:dt},r.a.createElement("h1",{className:"display-5"},"Welcome to TruthTree"),r.a.createElement(ut.a,{avgTypingDelay:20,cursor:{hideWhenDone:!0}},"We're an open source data visualization project that focuses on U.S government financial spending. \xa0",r.a.createElement(xe.a,{to:"/about"},"Find out more")))))}}]),t}(n.Component),mt={marginBottom:"12em",backgroundColor:"rgba(13, 22, 38, 0.7)"},ht=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,null,r.a.createElement(O.a,null,r.a.createElement(T.a,{style:mt,xs:12,sm:11,md:9,lg:6,className:"py-3 px-4"},r.a.createElement(pt,null),r.a.createElement(ct,null))))}}]),t}(n.Component),bt={flex:"1 1 100%"},ft=function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:bt,className:"d-flex align-items-center position-relative"},r.a.createElement(We,null),r.a.createElement(ht,null))}}]),t}(n.Component),yt=(a(490),function(e){function t(){return Object(p.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(ze,null),r.a.createElement(g.a,null,r.a.createElement(v.a,{exact:!0,path:"/",component:ft}),r.a.createElement(v.a,{exact:!0,path:"/about",component:Pe}),r.a.createElement(v.a,{exact:!0,path:"/explore/:level/:name/:id",component:je}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(491),a(492),a(493),a(494);l.a.render(r.a.createElement(i.a,{store:Object(c.d)(d,Object(c.a)(s.a))},r.a.createElement(yt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[243,1,2]]]);
//# sourceMappingURL=main.b1bac1e7.chunk.js.map