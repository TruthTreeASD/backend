(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{158:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},235:function(e,t,a){e.exports=a.p+"static/media/truthtree-logo.75b56fb9.png"},237:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},243:function(e,t,a){e.exports=a(494)},252:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},330:function(e,t,a){},41:function(e,t){e.exports={TRUTHTREE_URI:"https://truthtree.herokuapp.com"}},469:function(e,t,a){},489:function(e,t,a){},493:function(e,t,a){},494:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(22),l=a.n(o),i=a(25),c=a(68),s=a(213),u=a(40),p={value:"",loading:!0},d=Object(c.c)({FilterByReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dimension:"State"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DIMENSION":return Object(u.a)({},e,{dimension:t.value});default:return e}},AttributeRangeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeName:["Population"],populationRange:[-25,25]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RANGE_SELECTION":return Object(u.a)({},e,{populationRange:t.populationRange});default:return e}},SelectedAttributeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebarData:[],selectedAttributes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ATTRIBUTE":return Object(u.a)({},e,{selectedAttributes:Array.from(t.value)});default:return e}},YearSelectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{yearSelected:2016},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_YEAR":e=Object(u.a)({},e,{yearSelected:t.yearSelected});break;default:return e}return e},LocationSearchBoxReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCHBOX_UPDATE_VALUE":return Object(u.a)({},e,{value:t.payload});case"SEARCHBOX_FINISH_LOADING":return Object(u.a)({},e,{loading:!1});default:return e}},NormalizationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NORMALIZATION":e=Object(u.a)({},e,{selectedNormalizationName:t.selectedNormalizationName,selectedNormalizationDisplayName:t.selectedNormalizationDisplayName});break;default:return e}return e}});for(var m=a(13),h=a(14),b=a(16),f=a(15),y=a(17),g=a(526),v=a(528),E=a(523),O=a(506),j=a(507),N=a(511),T=(a(252),a(504)),R=a(510),k=a(505),S=a(33),A=a(34),C=a.n(A),x=a(36),w=a.n(x),z=(a(271),a(41)),I=a(500),D=(a(158),a(496)),_=a(497),L=a(498),U=a(499),B=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={dropdownOpen:!1,selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS",normalizationValues:[]},a.normalizationValuesCall=a.normalizationValuesCall.bind(Object(S.a)(a)),a.toggle=a.toggle.bind(Object(S.a)(a)),a.setSelectedNormalization=a.setSelectedNormalization.bind(Object(S.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.normalizationValuesCall()}},{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"setSelectedNormalization",value:function(e){this.props.dispatch({type:"CHANGE_NORMALIZATION",selectedNormalizationName:e.target.id,selectedNormalizationDisplayName:e.target.value})}},{key:"normalizationValuesCall",value:function(){var e=this;C.a.get("".concat(z.TRUTHTREE_URI,"/api/normalization_types")).then(function(t){e.setState({normalizationValues:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.normalizationValues.map(function(t,a){return r.a.createElement(D.a,{key:a,id:t.name,value:t.displayValue,onClick:e.setSelectedNormalization},t.displayValue)});return r.a.createElement("div",{id:"normalisation"},"Normalization attribute:",r.a.createElement(_.a,{id:"dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(L.a,{caret:!0}," ",this.props.selectedNormalizationDisplayName," "),r.a.createElement(U.a,null,t)))}}]),t}(n.Component),P=Object(i.b)(function(e){return{selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName,selectedNormalizationDisplayName:e.NormalizationReducer.selectedNormalizationDisplayName}},function(e){return{dispatch:e}})(B),H=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={currentLevel:null,data:{},locationIds:[],selectedAttributes:[],year:2016,selectedNormalizationName:"GROSS",populationRange:[-25,25]},a.populationRangeCall=a.populationRangeCall.bind(Object(S.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({selectedAttributes:e.selectedAttributes,year:e.year,selectedNormalizationName:e.selectedNormalizationName,populationRange:e.populationRange,normalizationKeys:e.normalizationKeys}),this.state.populationRange!==e.populationRange&&this.populationRangeCall();var a=w.a.flatMap(e.selectedAttributes,function(e){return e[0]});a.length>0&&C.a.get("/api/attributes?locationIds="+this.state.locationIds+"&attributeIds="+a+"&normalizationType="+e.selectedNormalizationName+"&yearList="+e.year).then(function(a){var n=t.state.data;w.a.map(a.data,function(t){w.a.map(t.attributes,function(a){n[t.location_id][a.attribute_id]="PER_CAPITA"===e.selectedNormalizationName?a.data[0].per_capita:"BY_REVENUE"===e.selectedNormalizationName?a.data[0].by_revenue:a.data[0].value})}),t.setState({data:n})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.setState({data:{},selectedAttribtes:this.props.selectedAttributes,year:this.props.yearSelected,selectedNormalizationName:this.props.selectedNormalizationName}),this.populationRangeCall()}},{key:"populationRangeCall",value:function(){var e=this,t=0,a=0,n={},r=[],o=this.state.year?this.state.year:2016;C.a.get("".concat(z.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+o).then(function(o){var l=o.data.population;return a=Math.floor(l+e.props.populationRange[1]/100*l),t=Math.floor(l+e.props.populationRange[0]/100*l),C.a.get("".concat(z.TRUTHTREE_URI,"/api/").concat(e.props.level,"?populationRange=")+t+","+a).then(function(t){w.a.map(t.data,function(e){n[e.id]={name:e.name,1:e.population},r.push(e.id)}),e.setState({data:n}),e.setState({locationIds:r})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"mainDisplay"},r.a.createElement(P,null),r.a.createElement(I.a,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Population"),this.state.selectedAttributes.map(function(e,t){return r.a.createElement("th",{key:t},e[1])}))),r.a.createElement("tbody",null,w.a.values(this.state.data).map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,t.name),r.a.createElement("td",null,t[1].toLocaleString()),e.state.selectedAttributes.map(function(a,n){var o="https://www.google.com/search?q="+t.name+"+"+e.state.selectedAttributes[n][1];return r.a.createElement("td",{key:n},r.a.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},t[a[0]]))}))}))))}}]),t}(n.Component),M=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName}})(H),G=a(37),V=(a(272),a(216)),Y=a(527),W=(a(273),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).isAttributeSelected=function(e){for(var t=0;t<a.props.selectedAttributes.length;t++)if(a.props.selectedAttributes[t][0]===e)return!0;return!1},a.handleClickCollection=function(e){a.setState(Object(G.a)({},e,!a.state[e]))},a.handleChangeSearch=function(e){a.setState({searchedString:e.target.value.toLowerCase()}),a.state.searchedString},a.renderSearchTerm=function(e){if(""===a.state.searchedString||a.state.sidebarData[e].name.toLowerCase().search(a.state.searchedString)>-1)return!0;var t;for(t in a.state.sidebarData[e].attributes)if(a.state.sidebarData[e].attributes[t].name.toLowerCase().search(a.state.searchedString)>-1)return!0;return!1},a.state={sidebarData:[],isLoaded:!1,selectedAttributes:[],collapsedLeft:!1,searchedString:""},Object.keys(a.state.sidebarData).map(function(e){return a.state[e]=!1}),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;C.a.get("".concat(z.TRUTHTREE_URI,"/api/collections?locationId=")+this.props.match.params.id).then(function(t){e.setState({sidebarData:t.data,isLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"handleClickAttribute",value:function(e,t){for(var a=this,n=this.props.selectedAttributes,r=t.attribute_id,o=function(e){if(n[e][0]===r)return w.a.remove(n,function(t){return t===n[e]}),a.setState({selectedAttributes:n}),a.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n}),{v:void 0}},l=0;l<n.length;l++){var i=o(l);if("object"===typeof i)return i.v}n.length<10?(n.push([r,t.name,e]),this.setState({selectedAttributes:n}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n})):Object(V.confirmAlert)({title:"Error!",message:"Number of selected attributes exceeded limit of 10, please remove attributes to add more.",buttons:[{label:"OK"}]})}},{key:"collapseLeftBar",value:function(){this.setState({collapsedLeft:!this.state.collapsedLeft}),this.setState({searchedString:""})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?this.state.collapsedLeft?r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-right"})):r.a.createElement("nav",{className:"scrollLeftBar col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control leftSearch","data-spy":"affix","data-offset-top":"197",id:"attribute-search-box",onChange:this.handleChangeSearch,placeholder:"Property Lookup"})),r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),r.a.createElement("div",{style:{display:this.state.collapsedLeft?"none":"block"}},Object.keys(this.state.sidebarData).map(function(t,a){if(e.renderSearchTerm(t))return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"accordion",onClick:function(){return e.handleClickCollection(t)}},e.state.sidebarData[t].name),r.a.createElement("div",{style:{display:e.state[t]?"block":"none"}},Object.keys(e.state.sidebarData[t].attributes).map(function(a,n){return r.a.createElement("label",{onClick:function(){return e.handleClickAttribute(e.state.sidebarData[t].name,e.state.sidebarData[t].attributes[a])},key:n,className:"panel float-right",style:{background:e.isAttributeSelected(e.state.sidebarData[t].attributes[a].attribute_id)?"#d4f3c7":"white"}},r.a.createElement("div",null,e.state.sidebarData[t].attributes[a].name))})))}))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component)),F=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}},function(e){return{dispatch:e}})(Object(Y.a)(W)),K={height:"200px",overflow:"auto"},q=[],X=1966;X<2016;X++)q.push(X+1);var Z,J=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).toggle=a.toggle.bind(Object(S.a)(a)),a.state={dropdownOpen:!1,yearSelected:"2016"},a.onClick=a.onClick.bind(Object(S.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"onClick",value:function(e){console.log(e.target.id),this.props.dispatch({type:"CHANGE_YEAR",yearSelected:e.target.id})}},{key:"render",value:function(){var e=this,t=q.map(function(t,a){return r.a.createElement(D.a,{key:a,id:t,onClick:e.onClick},t)});return r.a.createElement("div",null,r.a.createElement("p",null," Select Year of Data to be displayed: "),r.a.createElement(_.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(L.a,{caret:!0},this.props.yearSelected),r.a.createElement(U.a,{style:K},t)))}}]),t}(n.Component),$=Object(i.b)(function(e){return{yearSelected:e.YearSelectorReducer.yearSelected}},function(e){return{dispatch:e}})(J),Q=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={selectedAttributes:[]},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedAttribtes:this.props.selectedAttributes})}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes})}},{key:"deselectAttribute",value:function(e){for(var t=this,a=this.state.selectedAttributes,n=e[0],r=function(e){if(a[e][0]===n)return w.a.remove(a,function(t){return t===a[e]}),t.setState({selectedAttributes:a}),t.props.dispatch({type:"CHANGE_ATTRIBUTE",value:a}),{v:void 0}},o=0;o<a.length;o++){var l=r(o);if("object"===typeof l)return l.v}}},{key:"render",value:function(){var e=this;return this.state.selectedAttributes.length<1?r.a.createElement("div",null):r.a.createElement("div",{className:"row"},r.a.createElement("span",{className:"text-info",style:{padding:"10px",fontSize:"18px"}},"Selected Filters"),Object.keys(this.state.selectedAttributes).map(function(t,a){return r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement("button",{className:"btn btn-light",onClick:function(){return e.deselectAttribute(e.state.selectedAttributes[a])}},r.a.createElement("i",{className:"fa fa-times",style:{paddingRight:"10px"}}),e.state.selectedAttributes[a][1]))}))}}]),t}(n.Component),ee=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(Q),te=a(240),ae=(a(328),a(329),a(330),te.a.Range),ne=(Z={"-50":"50"},Object(G.a)(Z,"-50","-50%"),Object(G.a)(Z,"-40","-40%"),Object(G.a)(Z,"-30","-30%"),Object(G.a)(Z,"-20","-20%"),Object(G.a)(Z,"-10","-10%"),Object(G.a)(Z,"0","0%"),Object(G.a)(Z,"10","10%"),Object(G.a)(Z,"20","+20%"),Object(G.a)(Z,"30","+30%"),Object(G.a)(Z,"40","+40%"),Object(G.a)(Z,"50","+50%"),Z),re=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).onSliderChange=function(e){console.log(),a.props.dispatch({type:"RANGE_SELECTION",populationRange:e})},a.state={locationPopulation:null,value:[-5,5],min:-50,max:50},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.yearSelected?this.props.yearSelected:2016,a="".concat(z.TRUTHTREE_URI,"/api/population?locationId=")+this.props.locationId+"&year="+t;console.log(a);var n=null;C.a.get(a).then(function(t){n=t.data.population,console.log(t.data.population),e.setState({locationPopulation:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.attribute.attributeName.map(function(t,a){return r.a.createElement("div",{className:"outer",key:a},r.a.createElement("p",null,t," of ",e.props.location," ",":  "," ",r.a.createElement("b",null,e.state.locationPopulation)),r.a.createElement("p",null,"Select range of ",r.a.createElement("b",null,t)," for filtering other"," ",r.a.createElement("b",null,e.props.level),":"),r.a.createElement("p",{className:"Note"},"(*range selection available from -50% to +50% wrt to"," ",e.props.location," ",t,")"),r.a.createElement(ae,{dots:!0,step:5,value:e.props.attribute.populationRange,min:e.state.min,max:e.state.max,marks:ne,onChange:e.onSliderChange}),r.a.createElement("p",{className:"selectionText"},"Current selection: ",e.props.attribute.populationRange[0],"% to"," ",e.props.attribute.populationRange[1],"% :"))});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null," ",t," ")))}}]),t}(n.Component),oe=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,attribute:e.AttributeRangeReducer}},function(e){return{dispatch:e}})(re),le=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.label;(0,e.onClick)(t)},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tab-list-item";return a===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),t}(n.Component),ie=(a(172),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).onClickTabItem=function(e){a.setState({activeTab:e})},a.state={activeTab:a.props.children[0].props.label},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map(function(t){var n=t.props.label;return r.a.createElement(le,{activeTab:a,key:n,label:n,onClick:e})})),r.a.createElement("div",{className:"tab-content"},t.map(function(e){if(e.props.label===a)return e.props.children})))}}]),t}(n.Component)),ce=a(215),se=a(501),ue=a(525),pe=a(508),de=a(509),me=a(503),he=a(524),be=a(502),fe=a(232),ye=a(233),ge=a(117),ve=a(90),Ee=a(242),Oe=(a(173),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.attributeName;return"large"===this.props.condition?r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(se.a,{color:"info",className:"popupHeader"},this.props.collectionName," - ",this.props.attributeName)),r.a.createElement(he.a,{width:1050,height:450,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(be.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(fe.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(ye.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(ge.a,null),r.a.createElement(ve.a,{verticalAlign:"bottom",iconSize:10}),this.props.locations.map(function(e,t){return r.a.createElement(Ee.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})}))):r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(se.a,{color:"info"}," ",this.props.collectionName," - ",this.props.attributeName," ")),r.a.createElement(he.a,{width:495,height:200,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(be.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(fe.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(ye.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(ge.a,null),this.props.locations.map(function(e,t){return r.a.createElement(Ee.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})})))}}]),t}(n.Component)),je=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={loading:!0,locations:[],data:[],locationData:[],currentLevel:null,dataReal:[],locationIds:[],lineColors:["red","purple","green","blue","deeppink","orange","navy","olive","lime","indianred","dimgrey"]},a.fetchResponse=a.fetchResponse.bind(Object(S.a)(a)),a.formatResponse=a.formatResponse.bind(Object(S.a)(a)),a.initializeYearMap=a.initializeYearMap.bind(Object(S.a)(a)),a.fetchLocations=a.fetchLocations.bind(Object(S.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"componentWillReceiveProps",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"fetchLocations",value:function(){var e=this,t=0,a=0,n=[],r=this.props.yearSelected?this.props.yearSelected:2016,o={};C.a.get("".concat(z.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+r).then(function(r){var l=r.data.population;return a=Math.floor(l+e.props.populationRange[1]/100*l),t=Math.floor(l+e.props.populationRange[0]/100*l),C.a.get("".concat(z.TRUTHTREE_URI,"/api/states?populationRange=")+t+","+a).then(function(t){w.a.map(t.data,function(e){o[e.id]={name:e.name,1:e.population},n.push(e.id)}),e.setState({locationIds:n}),e.setState({locationData:o}),e.fetchResponse()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"fetchResponse",value:function(){var e=this,t="".concat(z.TRUTHTREE_URI,"/api/attributes?locationIds=")+this.state.locationIds+"&attributeIds="+this.props.selectedAttributes[this.props.index][0]+"&normalizationType="+this.props.selectedNormalization;C.a.get(t).then(function(t){e.formatResponse(t)}).catch(function(e){console.log(e)})}},{key:"formatResponse",value:function(e){var t=this,a=[],n=[],r={};e.data.map(function(e){var a={},o=t.state.locationData[e.location_id].name;return e.attributes.map(function(l){l.data.map(function(a){var n=r[l.attribute_id];void 0===n&&(n=t.initializeYearMap());var i=n[a.year-1967];return 0!==i[e.location_id]&&void 0!==i[e.location_id]||("GROSS"===t.props.selectedNormalization?n[a.year-1967][o]=a.value:"PER_CAPITA"===t.props.selectedNormalization?n[a.year-1967][o]=a.per_capita:"BY_REVENUE"===t.props.selectedNormalization&&(n[a.year-1967][o]=a.by_revenue)),r[l.attribute_id]=n,null}),a.id=e.location_id;var i=t.state.lineColors[Math.floor(11*Math.random())];return a.color=i,a.name=o,n.push(a),null}),null}),a.push(r),this.setState({data:a,locations:n,loading:!1})}},{key:"initializeYearMap",value:function(){for(var e=[],t=1967;t<2017;t++){var a={year:t};e.push(a)}return e}},{key:"render",value:function(){var e=this,t=this.props.selectedAttributes.length,a=this.state.loading;return 0===t?r.a.createElement("div",null,"Select an attribute"):a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(me.a,{className:"align-self-center",color:"secondary",size:"sm"})):this.state.data.map(function(t,a){return r.a.createElement(Oe,{data:t[e.props.selectedAttributes[e.props.index][a]],attributeName:e.props.selectedAttributes[e.props.index][1],collectionName:e.props.selectedAttributes[e.props.index][2],locations:e.state.locations,condition:e.props.condition})})}}]),t}(n.Component),Ne=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,year:e.YearSelectorReducer.yearSelected,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalization:e.NormalizationReducer.selectedNormalizationName}})(je),Te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).handExpandClick=function(e){return a.setState({modal:!0,modalAttrIndex:e})},a.state={modal:!1},a.modalToggle=a.modalToggle.bind(Object(S.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"getAttributeNames",value:function(e){return w.a.flatMap(this.props.selectedAttributes,function(t){return"name"===e?t[1]:t[0]})}},{key:"render",value:function(){var e=this,t=this.getAttributeNames("name"),a=t.length,n=t.map(function(t,a){return r.a.createElement("div",null,r.a.createElement(T.a,{key:a,sm:"8"},r.a.createElement(k.a,null,r.a.createElement(Ne,{index:a,condition:"tiny",id:e.props.id}),r.a.createElement(ce.a,{className:"button",color:"secondary",onClick:function(){return e.handExpandClick(a)}},r.a.createElement(se.a,null,"Expand")))))});return 0===a?r.a.createElement(O.a,{className:"alert"}," ","Please select minimum of one attribute"," "):r.a.createElement(O.a,{className:"GridContainer"},r.a.createElement(P,null),r.a.createElement(j.a,null,n,r.a.createElement(ue.a,{isOpen:this.state.modal,toggle:this.modalToggle,className:"GridModal"},r.a.createElement(pe.a,null,r.a.createElement(Ne,{index:this.state.modalAttrIndex,condition:"large",id:this.props.id})),r.a.createElement(de.a,null,r.a.createElement(ce.a,{color:"secondary",onClick:this.modalToggle},"Cancel")))))}}]),t}(n.Component),Re=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(Te),ke={paddingTop:90},Se=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{fluid:!0,style:ke},r.a.createElement(j.a,null,r.a.createElement(F,null),r.a.createElement("div",{className:"col-12 col-md-10 align-items-center"},r.a.createElement(T.a,null,r.a.createElement("div",{className:"attribute-selector-padding"},r.a.createElement(ee,null)),r.a.createElement(ie,null,r.a.createElement("div",{label:"Table View"},r.a.createElement(M,{level:this.props.match.params.level,id:this.props.match.params.id})),r.a.createElement("div",{label:"Time Series View"},r.a.createElement(Re,{id:this.props.match.params.id})))),r.a.createElement(T.a,null,r.a.createElement(R.a,null,r.a.createElement("div",null,"Selected Location: ",r.a.createElement("b",null,this.props.match.params.name))),r.a.createElement(k.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{className:"border-right"},r.a.createElement(oe,{level:this.props.match.params.level,location:this.props.match.params.name,locationId:this.props.match.params.id})),r.a.createElement(N.a,{sm:"2",xs:"2"},r.a.createElement($,null))))))))}}]),t}(n.Component),Ae=a(514),Ce=a(515),xe=a(516),we=a(517),ze=a(518),Ie=a(519),De=a(520),_e=a(512),Le=a(4),Ue=a.n(Le),Be=a(241),Pe=a(513),He=a(116),Me=a.n(He),Ge=a(234),Ve=a.n(Ge),Ye=function(e){return{type:"SEARCHBOX_UPDATE_VALUE",payload:e}},We=function(){return{type:"SEARCHBOX_FINISH_LOADING"}},Fe="/api/states",Ke="/api/counties",qe="/api/cities",Xe={0:"states",1:"counties",2:"cities"},Ze=function(e){return{threshold:.6,includeScore:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:e}},Je=function(e){var t=e.containerProps,a=e.children;return r.a.createElement("div",Object.assign({style:{height:"5em"}},t),a)},$e=function(e){var t=e.item,a=t.name;return 1!==t.typeCode&&(a+=t.county?", ".concat(t.county):""),a+=t.stateAbbr?", ".concat(t.stateAbbr):""},Qe=function(e){var t=e.item,a="/explore/".concat(Xe[t.type_code],"/").concat(t.name.toLowerCase().replace(" ","-"),"/").concat(t.id);return r.a.createElement(_e.a,{to:a},$e(e))},et=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e)))._parseData=function(e,t,n){var r=e.reduce(function(e,t){return e[t.state_code]=t,t.counties={},t.type_code=0,e},{});t.forEach(function(e){var t=r[e.fips_code_state];e.state=t.name,e.stateAbbr=t.abbreviation,t.counties[e.county]=e}),n.forEach(function(e){var t=r[e.fips_code_state],a=t.counties[e.county];t?(e.state=t.name,e.stateAbbr=t.abbreviation):(e.state=null,e.stateAbbr=null),e.county=a?a.name:null});var o=Ze([{name:"abbreviation",weight:.3},{name:"name",weight:.7}]),l=Ze([{name:"name",weight:.6},{name:"state",weight:.3},{name:"stateAbbr",weight:.1}]),i=Ze([{name:"name",weight:.7},{name:"state",weight:.2},{name:"stateAbbr",weight:.05},{name:"county",weight:.05}]);a.setState({statesData:new Me.a(e,o),countiesData:new Me.a(t,l),citiesData:new Me.a(n,i)},function(){a.props.dispatch(We())})},a.storeInputRef=function(e){null!==e&&(a.input=e.input)},a.handleInputChange=function(e,t){var n=t.newValue;a.props.dispatch(Ye(n))},a.handleSuggestionsFetchRequested=function(e){var t=e.value,n=a.state.statesData.search(t),r=a.state.countiesData.search(t),o=a.state.citiesData.search(t),l=[].concat(n,r,o);l.sort(function(e,t){return e.score-t.score}),a.setState({suggestions:l.slice(0,10)})},a.renderInputComponent=function(e){return r.a.createElement("div",null,r.a.createElement(Pe.a,Object.assign({},e,{id:"location-search-box",name:"location-search-box",placeholder:"Try something like Seattle or Boston",innerRef:function(e){a.inputRef=e}})))},a.state={value:"",popoverOpen:!1,statesData:void 0,countiesData:void 0,citiesData:void 0,matchedStates:[],matchedCounties:[],matchedCities:[],suggestions:[]},a.debouncedhandleSuggestionsFetchRequested=w.a.debounce(a.handleSuggestionsFetchRequested,250),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[Object(A.get)(Fe),Object(A.get)(Ke),Object(A.get)(qe)];Promise.all(t).then(function(t){var a=Object(Be.a)(t,3),n=a[0],r=a[1],o=a[2];e._parseData(n.data,r.data,o.data)}).catch(function(e){return console.log(e)})}},{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.inputRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.loading,n={value:t.value,onChange:this.handleInputChange};return r.a.createElement(O.a,null,r.a.createElement(j.a,null,a?r.a.createElement(N.a,{className:"d-flex justify-content-center"},r.a.createElement(me.a,{className:"align-self-center",color:"primary"})):r.a.createElement(N.a,null,r.a.createElement(Ve.a,{ref:this.storeInputRef,theme:{container:"position-relative",suggestionsList:"list-group position-absolute w-100 overflow-y",suggestion:"list-group-item"},suggestions:this.state.suggestions,alwaysRenderSuggestions:!0,onSuggestionsClearRequested:function(){return e.setState({suggestions:[]})},onSuggestionsFetchRequested:this.debouncedhandleSuggestionsFetchRequested,getSuggestionValue:$e,renderInputComponent:this.renderInputComponent,renderSuggestionsContainer:Je,renderSuggestion:Qe,inputProps:n}))))}}]),t}(n.Component),tt=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,loading:e.LocationSearchBoxReducer.loading}})(Object(Y.a)(et)),at=a(235),nt=a.n(at),rt={backgroundColor:"rgba(13, 22, 38, 0.8)"},ot={"&:hover":{textDecoration:"none"}},lt={width:50},it=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchPhrase,a=Ue()({"justify-content-center":!0,"d-none":""===t});return r.a.createElement(Ae.a,{style:rt,expand:"md",className:"fixed-top"},r.a.createElement(Ce.a,{className:"text-primary",style:ot},r.a.createElement(_e.a,{to:"/"},r.a.createElement("img",{src:nt.a,style:lt,className:"d-inline-block",alt:"TruthTree logo"})),"\xa0TruthTree"),r.a.createElement(xe.a,{onClick:function(){return e.setState({collapseOpen:!e.state.collapseOpen})}}),r.a.createElement(we.a,{isOpen:this.state.collapseOpen,navbar:!0},r.a.createElement(O.a,null,r.a.createElement(j.a,{className:a},r.a.createElement(N.a,{md:10,lg:7},r.a.createElement(tt,null)))),r.a.createElement(ze.a,{className:"ml-auto",navbar:!0},r.a.createElement(Ie.a,null,r.a.createElement(De.a,{tag:_e.a,to:"/"},"Explore")),r.a.createElement(Ie.a,null,r.a.createElement(De.a,{tag:_e.a,to:"/about"},"About")))))}}]),t}(n.Component),ct=Object(Y.a)(Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(it)),st=a(521),ut=(a(469),{paddingTop:70}),pt=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{fluid:!0,style:ut,className:"about"},r.a.createElement(st.a,{className:"float-center"},r.a.createElement("h1",{className:"text-primary"},"TruthTree"),r.a.createElement("p",null,"A Public Data Vizipedia/Wiki-Laboratory"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",{className:"lead"},"TruthTree seeks to unite all the public data in the world into a data-visualization tool and reference platform that can facilitate data-driven understanding and consensus regarding geography, politics, and culture for geographical entities at all scales."),r.a.createElement("p",{className:"lead"})))}}]),t}(n.Component),dt=a(236),mt=a.n(dt),ht=a(237),bt={height:"100%",width:"100%"},ft=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={center:{lat:37.09024,lng:-95.712891},zoom:5},a.handleApiLoaded=function(e,t){e.setOptions({styles:ht,fullscreenControlOptions:{position:t.ControlPosition.BOTTOM_RIGHT}})},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:bt,className:"position-absolute"},r.a.createElement(mt.a,{bootstrapURLKeys:{key:"AIzaSyD6S0fXIE22l64bV3nhv-EB-7K1gh39nqs"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}}))}}]),t}(n.Component),yt=a(522),gt=function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleInputChange=function(e){e.target.blur(),a.props.dispatch(Ye(e.target.value))},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.loading;return r.a.createElement(O.a,null,r.a.createElement(j.a,{className:"py-3"},a?r.a.createElement(N.a,{className:"d-flex justify-content-center"},r.a.createElement(me.a,{className:"align-self-center",color:"primary"})):r.a.createElement(N.a,null,r.a.createElement(yt.a,{style:{cursor:"pointer",color:"white"},for:"dummy-search-box"},"Search for a U.S location:"),r.a.createElement(Pe.a,{id:"dummy-search-box",value:t,onChange:this.handleInputChange,placeholder:"Try something like Seattle or Boston"}))))}}]),t}(n.Component),vt=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,loading:e.LocationSearchBoxReducer.loading}})(gt),Et=a(238),Ot=a.n(Et),jt={color:"white"},Nt=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{style:jt},r.a.createElement("h1",{className:"text-primary"},"Welcome to TruthTree"),r.a.createElement(Ot.a,{avgTypingDelay:20,cursor:{hideWhenDone:!0}},"We're an open source data visualization project that focuses on U.S government financial spending. \xa0",r.a.createElement(_e.a,{to:"/about"},"Find out more")))))}}]),t}(n.Component),Tt={marginBottom:"12em",backgroundColor:"rgba(13, 22, 38, 0.7)"},Rt=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.searchPhrase,t=Ue()({"d-none":""!==e});return r.a.createElement(O.a,{className:t},r.a.createElement(j.a,null,r.a.createElement(N.a,{style:Tt,xs:12,sm:11,md:9,lg:6,className:"py-3 px-4"},r.a.createElement(Nt,null),r.a.createElement(vt,null))))}}]),t}(n.Component),kt=Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(Rt),St={flex:"1 1 100%"},At=function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:St,className:"d-flex align-items-center position-relative"},r.a.createElement(ft,null),r.a.createElement(kt,null))}}]),t}(n.Component),Ct=(a(489),function(e){function t(){return Object(m.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(ct,null),r.a.createElement(v.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:At}),r.a.createElement(E.a,{exact:!0,path:"/about",component:pt}),r.a.createElement(E.a,{exact:!0,path:"/explore/:level/:name/:id",component:Se}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(490),a(491),a(492),a(493);l.a.render(r.a.createElement(i.a,{store:Object(c.d)(d,Object(c.a)(s.a))},r.a.createElement(Ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[243,1,2]]]);
//# sourceMappingURL=main.ae31afd0.chunk.js.map