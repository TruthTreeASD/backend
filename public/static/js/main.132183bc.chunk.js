(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{191:function(e,t,a){},252:function(e,t,a){e.exports=a.p+"static/media/truthtree-logo.75b56fb9.png"},254:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},260:function(e,t,a){e.exports=a(505)},269:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},355:function(e,t,a){},42:function(e,t){e.exports={TRUTHTREE_URI:"https://truthtree.herokuapp.com"}},480:function(e,t,a){},502:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),o=a.n(l),c=a(38),i=a(73),s=a(230),u=a(64),p=Object(i.c)({FilterByReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dimension:"State"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DIMENSION":return Object(u.a)({},e,{dimension:t.value});default:return e}},AttributeRangeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeName:["Population"],populationRange:[-50,50]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RANGE_SELECTION":return Object(u.a)({},e,{populationRange:t.populationRange});default:return e}},SelectedAttributeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebarData:[],selectedAttributes:[]},t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case"CHANGE_ATTRIBUTE":return Object(u.a)({},e,{selectedAttributes:Array.from(t.value)});default:return e}},YearSelectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{yearSelected:2016},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_YEAR":e=Object(u.a)({},e,{yearSelected:t.yearSelected});break;default:return e}return e}});for(var d=a(22),m=a(23),h=a(25),b=a(24),f=a(26),y=a(531),v=a(535),g=a(529),E=a(511),T=a(512),O=a(516),j=(a(269),a(513)),k=a(514),C=a(515),S=a(55),A=a(256),R=a(39),w=a.n(R),x=a(57),N=a.n(x),I=(a(343),a(42)),D=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={currentLevel:null,data:[["Name","Population"]],locationIds:[]},a.cellRenderer=a.cellRenderer.bind(Object(S.a)(a)),a.getAttributeType=a.getAttributeType.bind(Object(S.a)(a)),a.populationRangeCall=a.populationRangeCall.bind(Object(S.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"cellRenderer",value:function(e){var t=e.columnIndex,a=e.key,n=e.rowIndex,l=e.style;return r.a.createElement("div",{key:a,style:l},this.state.data[n][t])}},{key:"getAttributeType",value:function(e){return console.log(this.props.selectedAttributes),N.a.flatMap(this.props.selectedAttributes,function(t){return"ids"===e?t[0]:t[1]})}},{key:"componentDidMount",value:function(){this.populationRangeCall()}},{key:"populationRangeCall",value:function(){var e=this,t=0,a=0,n=[["Name","Population"]],r=[],l=this.props.yearSelected?this.props.yearSelected:2016;w.a.get("".concat(I.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+l).then(function(l){var o=l.data.population;return a=Math.floor(o+e.props.populationRange[1]/100*o),t=Math.floor(o+e.props.populationRange[0]/100*o),w.a.get("".concat(I.TRUTHTREE_URI,"/api/states?populationRange=")+t+","+a).then(function(t){N.a.map(t.data,function(e){n.push([e.name,e.population]),r.push(e.id)}),e.setState({data:n}),e.setState({locationIds:r})}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;console.log("----------"),console.log(this.props),console.log("----------");var t=this.getAttributeType("ids");if(t.length>0){this.state.data[0]=["Name","Population"].concat(this.getAttributeType("name")),w.a.get("/api/attributes?locationIds="+this.state.locationIds+"&attributeIds="+t+"&yearList="+this.props.year).then(function(t){console.log(t.data),N.a.map(t.data,function(t){console.log("+++++++++"),console.log(e.state.data[e.state.locationIds.indexOf(t.location_id)]),console.log(N.a.map(t.attributes,function(e){return e.data})),console.log("++++++++++"),e.state.data[e.state.locationIds.indexOf(t.location_id)].push(t.attributes[0].data[0].value)})}).catch(function(e){console.log(e)})}return r.a.createElement("div",{id:"mainDisplay"},r.a.createElement(A.a,{cellRenderer:this.cellRenderer,columnCount:this.state.data[0].length,columnWidth:150,height:500,rowCount:this.state.data.length,rowHeight:35,width:1100}))}}]),t}(n.Component),L=Object(c.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,populationRange:e.AttributeRangeReducer.populationRange}})(D),_=a(114),U=(a(344),a(533)),H=(a(345),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).isAttributeSelected=function(e){for(var t=0;t<a.state.selectedAttributes.length;t++)if(a.state.selectedAttributes[t][0]===e)return!0;return!1},a.handleClickCollection=function(e){a.setState(Object(_.a)({},e,!a.state[e]))},a.handleChangeSearch=function(e){a.setState({searchedString:e.target.value.toLowerCase()}),a.state.searchedString},a.renderSearchTerm=function(e){if(""==a.state.searchedString||a.state.sidebarData[e].name.toLowerCase().search(a.state.searchedString)>-1)return!0;var t;for(t in a.state.sidebarData[e].attributes)if(a.state.sidebarData[e].attributes[t].name.toLowerCase().search(a.state.searchedString)>-1)return!0;return!1},a.state={sidebarData:[],isLoaded:!1,selectedAttributes:[],collapsedLeft:!1,searchedString:""},Object.keys(a.state.sidebarData).map(function(e){return a.state[e]=!1}),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.get("".concat(I.TRUTHTREE_URI,"/api/collections?locationId=")+this.props.match.params.id).then(function(t){e.setState({sidebarData:t.data,isLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"handleClickAttribute",value:function(e,t){for(var a=this,n=this.state.selectedAttributes,r=t.attribute_id,l=function(e){if(n[e][0]===r)return N.a.remove(n,function(t){return t===n[e]}),a.setState({selectedAttributes:n}),a.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n}),{v:void 0}},o=0;o<n.length;o++){var c=l(o);if("object"===typeof c)return c.v}n.push([r,t.name]),this.setState({selectedAttributes:n}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n})}},{key:"collapseLeftBar",value:function(){this.setState({collapsedLeft:!this.state.collapsedLeft}),this.setState({searchedString:""})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?this.state.collapsedLeft?r.a.createElement("button",{className:"col-md-flex d-md-flex",onClick:function(){return e.collapseLeftBar()}},this.state.collapsedLeft?"Show":"Hide Left Nav"):r.a.createElement("nav",{className:"scrollLeftBar col-md-2 d-none d-md-block bg-light sidebar"},r.a.createElement("input",{className:"leftSearch","data-spy":"affix","data-offset-top":"197",id:"attribute-search-box",onChange:this.handleChangeSearch,placeholder:"Search for a property"}),r.a.createElement("button",{className:"float-right",onClick:function(){return e.collapseLeftBar()}},this.state.collapsedLeft?"Show Left Nav":"Hide"),r.a.createElement("div",{style:{display:this.state.collapsedLeft?"none":"block"}},Object.keys(this.state.sidebarData).map(function(t,a){if(e.renderSearchTerm(t))return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"accordion",onClick:function(){return e.handleClickCollection(t)}},e.state.sidebarData[t].name),r.a.createElement("div",{style:{display:e.state[t]?"block":"none"}},Object.keys(e.state.sidebarData[t].attributes).map(function(a,n){return r.a.createElement("label",{onClick:function(){return e.handleClickAttribute(t,e.state.sidebarData[t].attributes[a])},key:n,className:"panel float-right",style:{background:e.isAttributeSelected(e.state.sidebarData[t].attributes[a].attribute_id)?"bisque":"#d4f3c7"}},r.a.createElement("div",null,e.state.sidebarData[t].attributes[a].name))})))}))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component)),B=Object(c.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer}},function(e){return{dispatch:e}})(Object(U.a)(H)),M=a(507),P=a(508),G=a(534),Y=a(509),K={height:"200px",overflow:"auto"},W=[],z=1966;z<2016;z++)W.push(z+1);var V=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).toggle=a.toggle.bind(Object(S.a)(a)),a.state={dropdownOpen:!1,yearSelected:"2016"},a.onClick=a.onClick.bind(Object(S.a)(a)),a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"onClick",value:function(e){console.log(e.target.id),this.props.dispatch({type:"CHANGE_YEAR",yearSelected:e.target.id})}},{key:"render",value:function(){var e=this,t=W.map(function(t,a){return r.a.createElement(M.a,{key:a,id:t,onClick:e.onClick},t)});return r.a.createElement("div",null,r.a.createElement("p",null," Select Year of Data to be displayed: "),r.a.createElement(P.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(G.a,{caret:!0},this.props.yearSelected),r.a.createElement(Y.a,{style:K},t)))}}]),t}(n.Component),q=Object(c.b)(function(e){return{yearSelected:e.YearSelectorReducer.yearSelected}},function(e){return{dispatch:e}})(V),F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).state={selectedAttributes:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedAttribtes:this.props.selectedAttributes}),console.log(this.state.selectedAttributes),console.log("it worked"+this.state.selectedAttributes)}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes}),console.log("got prop")}},{key:"deselectAttribute",value:function(e){var t=this;console.log("Clicked button");var a=this.state.selectedAttributes,n=e[0];console.log(e);for(var r=function(e){if(a[e][0]===n)return N.a.remove(a,function(t){return t===a[e]}),t.setState({selectedAttributes:a}),t.props.dispatch({type:"CHANGE_ATTRIBUTE",value:a}),{v:void 0}},l=0;l<a.length;l++){var o=r(l);if("object"===typeof o)return o.v}}},{key:"render",value:function(){var e=this;return this.state.selectedAttributes.length<1?r.a.createElement("div",null):r.a.createElement("div",null,"Selected Filters : |",Object.keys(this.state.selectedAttributes).map(function(t,a){return r.a.createElement("button",{onClick:function(){return e.deselectAttribute(e.state.selectedAttributes[a])}},e.state.selectedAttributes[a][1])}))}}]),t}(n.Component),J=Object(c.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(F),X=a(257),Z=(a(353),a(354),a(355),X.a.Range),$=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).onSliderChange=function(e){console.log(),a.props.dispatch({type:"RANGE_SELECTION",populationRange:e})},a.state={locationPopulation:null,value:[-5,5],min:-50,max:50},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.yearSelected?this.props.yearSelected:2016,a="".concat(I.TRUTHTREE_URI,"/api/population?locationId=")+this.props.locationId+"&year="+t;console.log(a);var n=null;w.a.get(a).then(function(t){n=t.data.population,console.log(t.data.population),e.setState({locationPopulation:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.attribute.attributeName.map(function(t,a){return r.a.createElement("div",{key:a},r.a.createElement("p",null,t," of ",e.props.location," ",":  "," ",r.a.createElement("b",null,e.state.locationPopulation)),r.a.createElement("p",null,"Select range of ",r.a.createElement("b",null,t)," for filtering other"," ",r.a.createElement("b",null,e.props.level),":"),r.a.createElement("p",{className:"Note"},"(*range selection available from -50% to +50% wrt to"," ",e.props.location," ",t,")"),r.a.createElement(Z,{dots:!0,step:5,value:e.props.attribute.populationRange,min:e.state.min,max:e.state.max,onChange:e.onSliderChange}),r.a.createElement("p",null,"Current selection: ",e.props.attribute.populationRange[0],"% to"," ",e.props.attribute.populationRange[1],"% :"))});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null," ",t," ")))}}]),t}(n.Component),Q=Object(c.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,attribute:e.AttributeRangeReducer}},function(e){return{dispatch:e}})($),ee=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.label;(0,e.onClick)(t)},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,l="tab-list-item";return a===n&&(l+=" tab-list-active"),r.a.createElement("li",{className:l,onClick:e},n)}}]),t}(n.Component),te=(a(191),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e))).onClickTabItem=function(e){a.setState({activeTab:e})},a.state={activeTab:a.props.children[0].props.label},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map(function(t){var n=t.props.label;return r.a.createElement(ee,{activeTab:a,key:n,label:n,onClick:e})})),r.a.createElement("div",{className:"tab-content"},t.map(function(e){if(e.props.label===a)return e.props.children})))}}]),t}(n.Component)),ae=a(530),ne=a(510),re=a(249),le=a(250),oe=a(127),ce=a(99),ie=a(259),se=[{year:"1967",location1:400,location2:1200},{year:"1969",location1:200,location2:2400},{year:"2005",location1:700,location2:2e3},{year:"2010",location1:300,location2:1500}],ue=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){console.log("In Render");var e=se.length,t=Object.keys(se[0]).length;return console.log("Rows is "+e),console.log("Cols is "+t),r.a.createElement("div",null,r.a.createElement(ae.a,{width:400,height:400,data:se,margin:{top:5,right:20,bottom:5,left:0}},r.a.createElement(ne.a,{stroke:"#ccc",strokeDasharray:"5 5"}),r.a.createElement(re.a,{dataKey:"year"}),r.a.createElement(le.a,null),r.a.createElement(oe.a,null),r.a.createElement(ce.a,null),r.a.createElement(ie.a,{type:"monotone",dataKey:"location1",stroke:"#8884d8",activeDot:{r:8}}),r.a.createElement(ie.a,{type:"monotone",dataKey:"location2",stroke:"#82ca9d"})))}}]),t}(n.Component),pe=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{fluid:!0},r.a.createElement(T.a,null,r.a.createElement(B,null),r.a.createElement("div",{className:"col-12 col-md-10 align-items-center"},r.a.createElement(j.a,null,r.a.createElement(J,null),r.a.createElement(te,null,r.a.createElement("div",{label:"Table View"},r.a.createElement(L,{level:this.props.match.params.level,id:this.props.match.params.id})),r.a.createElement("div",{label:"Time Series View"},r.a.createElement(ue,null)),r.a.createElement("div",{label:"Map View"},"Coming soon :)"))),r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement("div",null,"Selected Location: ",r.a.createElement("b",null,this.props.match.params.name))),r.a.createElement(C.a,null,r.a.createElement(T.a,null,r.a.createElement(O.a,{className:"border-right"},r.a.createElement(Q,{level:this.props.match.params.level,location:this.props.match.params.name,locationId:this.props.match.params.id})),r.a.createElement(O.a,null,r.a.createElement(q,null))))))))}}]),t}(n.Component),de=a(517),me=a(518),he=a(520),be=a(521),fe=a(522),ye=a(523),ve=a(524),ge=a(519),Ee=(a(480),a(252)),Te=a.n(Ee),Oe={width:50},je=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(de.a,{color:"light",light:!0,expand:"md",className:this.props.className},r.a.createElement(me.a,null,r.a.createElement(ge.a,{to:"/"},r.a.createElement("img",{src:Te.a,style:Oe,className:"d-inline-block",alt:"TruthTree logo"})),"\xa0TruthTree"),r.a.createElement(he.a,{onClick:function(){return e.setState({collapseOpen:!e.state.collapseOpen})}}),r.a.createElement(be.a,{isOpen:this.state.collapseOpen,navbar:!0},r.a.createElement(fe.a,{className:"ml-auto",navbar:!0},r.a.createElement(ye.a,null,r.a.createElement(ve.a,{tag:ge.a,to:"/"},"Trending")),r.a.createElement(ye.a,null,r.a.createElement(ve.a,{tag:ge.a,to:"/explore"},"Explore")))))}}]),t}(n.Component),ke=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{fluid:!0},r.a.createElement(T.a,null,r.a.createElement(O.a,null,"Trending topics")))}}]),t}(n.Component),Ce=a(253),Se=a.n(Ce),Ae=a(254),Re=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={center:{lat:37.09024,lng:-95.712891},zoom:5},a.handleApiLoaded=function(e,t){console.log(e,t),e.setOptions({styles:Ae})},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Se.a,{bootstrapURLKeys:{key:"AIzaSyD6S0fXIE22l64bV3nhv-EB-7K1gh39nqs"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}})}}]),t}(n.Component),we=a(258),xe=a(525),Ne=a(526),Ie=a(527),De=a(528),Le=a(532),_e=a(126),Ue=a.n(_e),He={STATES:"".concat(I.TRUTHTREE_URI,"/api/states"),COUNTIES:"".concat(I.TRUTHTREE_URI,"/api/counties"),CITIES:"".concat(I.TRUTHTREE_URI,"/api/cities")},Be=function(e){return{threshold:.6,includeScore:!0,location:0,distance:100,maxPatternLength:32,minMatchCharLength:2,keys:e}},Me=function(e){var t=e.level,a=e.items;return r.a.createElement(xe.a,null,r.a.createElement(Ne.a,null,r.a.createElement("strong",{className:"text-uppercase"},t)),a.map(function(e,a){var n=(e=e.item).name;"counties"!==t&&(n+=e.county?", ".concat(e.county):""),n+=e.stateAbbr?", ".concat(e.stateAbbr):"";var l="/explore/".concat(t,"/").concat(e.name.toLowerCase().replace(" ","-"),"/").concat(e.id);return r.a.createElement(Ne.a,{key:a},r.a.createElement(ge.a,{to:l},n))}))},Pe=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(h.a)(this,Object(b.a)(t).call(this,e)))._parseData=function(e,t,n){var r=e.reduce(function(e,t){return e[t.state_code]=t,t.counties={},e},{});t.forEach(function(e){var t=r[e.state_code];e.state=t.name,e.stateAbbr=t.abbreviation,t.counties[e.county]=e}),n.forEach(function(e){var t=r[e.state_code],a=t.counties[e.county];t?(e.state=t.name,e.stateAbbr=t.abbreviation):(e.state=null,e.stateAbbr=null),e.county=a?a.name:null});var l=Be([{name:"abbreviation",weight:.3},{name:"name",weight:.7}]),o=Be([{name:"name",weight:.6},{name:"state",weight:.3},{name:"stateAbbr",weight:.1}]),c=Be([{name:"name",weight:.7},{name:"state",weight:.2},{name:"stateAbbr",weight:.05},{name:"county",weight:.05}]);a.setState({loading:!1,statesData:new Ue.a(e,l),countiesData:new Ue.a(t,o),citiesData:new Ue.a(n,c)})},a.handleChange=function(e){a.timer&&(clearTimeout(a.timer),a.timer=null);var t=e.target.value;a.timer=setTimeout(function(){var e=a.state.statesData.search(t),n=a.state.countiesData.search(t),r=a.state.citiesData.search(t),l=a.shouldPopoverOpen(e,n,r);a.setState({matchedStates:e,matchedCounties:n,matchedCities:r,popoverOpen:l})},300)},a.shouldPopoverOpen=function(e,t,a){return e.length>0||t.length>0||a.length>0},a.state={loading:!0,popoverOpen:!1,statesData:void 0,countiesData:void 0,citiesData:void 0,matchedStates:[],matchedCounties:[],matchedCities:[]},a.timer=null,a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[Object(R.get)(He.STATES),Object(R.get)(He.COUNTIES),Object(R.get)(He.CITIES)];Promise.all(t).then(function(t){var a=Object(we.a)(t,3),n=a[0],r=a[1],l=a[2];e._parseData(n.data,r.data,l.data)}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.matchedStates,n=e.matchedCounties,l=e.matchedCities,o=e.popoverOpen;return r.a.createElement("div",null,t?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Ie.a,{className:"align-self-center",color:"primary"})):r.a.createElement("div",null,r.a.createElement(De.a,{id:"location-search-box",onChange:this.handleChange,placeholder:"Search for location"}),r.a.createElement(Le.a,{placement:"bottom",isOpen:o,target:"location-search-box"},a.length>0&&r.a.createElement(Me,{level:"states",items:a.slice(0,3)}),n.length>0&&r.a.createElement(Me,{level:"counties",items:n.slice(0,3)}),l.length>0&&r.a.createElement(Me,{level:"cities",items:l.slice(0,3)}))))}}]),t}(n.Component),Ge=Object(U.a)(Pe),Ye={flex:"1 1 auto"},Ke={zIndex:99},We=function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"position-relative",style:Ye},r.a.createElement(E.a,{fluid:!0,className:"position-absolute my-3",style:Ke},r.a.createElement(T.a,{className:"justify-content-center"},r.a.createElement(O.a,{xs:6},r.a.createElement(Ge,null)))),r.a.createElement(Re,null))}}]),t}(n.Component),ze=(a(502),function(e){function t(){return Object(d.a)(this,t),Object(h.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(je,{className:"flex-grow-0 flex-shrink-0"}),r.a.createElement(v.a,null,r.a.createElement(g.a,{exact:!0,path:"/",component:ke}),r.a.createElement(g.a,{exact:!0,path:"/explore",component:We}),r.a.createElement(g.a,{exact:!0,path:"/explore/:level/:name/:id",component:pe}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(503),a(504);o.a.render(r.a.createElement(c.a,{store:Object(i.d)(p,Object(i.a)(s.a))},r.a.createElement(ze,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[260,1,2]]]);
//# sourceMappingURL=main.132183bc.chunk.js.map