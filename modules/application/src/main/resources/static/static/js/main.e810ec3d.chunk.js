(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{211:function(e,t,a){},225:function(e,t,a){},250:function(e,t,a){},289:function(e,t,a){},29:function(e,t){e.exports={TRUTHTREE_URI:"https://truthtree.herokuapp.com"}},301:function(e,t,a){},302:function(e,t,a){},337:function(e,t,a){e.exports=a.p+"static/media/truthtree-logo.75b56fb9.png"},339:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},351:function(e,t,a){e.exports=a(764)},352:function(e,t,a){},361:function(e,t,a){},380:function(e,t,a){},431:function(e,t,a){},433:function(e,t,a){},489:function(e,t,a){},494:function(e,t){},496:function(e,t){},663:function(e,t,a){},683:function(e,t,a){},701:function(e,t){},759:function(e,t,a){},760:function(e,t,a){},761:function(e,t,a){},764:function(e,t,a){"use strict";a.r(t);a(352);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),i=a(19),c=a(82),s=a(317),u=a(36),d={value:"",loading:!1,suggestions:[],selected:null},p={approvedStories:[],approvedStoriesLength:0,color:[],loading:!0,userSelectedStory:"none"},m={adminStories:[],adminStoriesLength:0,bgColor:[],loading:!0,adminSelectedStory:"none"},h=Object(c.c)({FilterByReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dimension:"State"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DIMENSION":return Object(u.a)({},e,{dimension:t.value});default:return e}},AttributeRangeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeName:["Population"],populationRange:[-25,25]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RANGE_SELECTION":return Object(u.a)({},e,{populationRange:t.populationRange});default:return e}},SelectedAttributeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebarData:[],selectedAttributes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ATTRIBUTE":return Object(u.a)({},e,{selectedAttributes:Array.from(t.value)});default:return e}},YearSelectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{yearSelected:2016},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_YEAR":e=Object(u.a)({},e,{yearSelected:t.yearSelected});break;default:return e}return e},LocationSearchBoxReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCHBOX_UPDATE_VALUE":return Object(u.a)({},e,{value:t.payload,suggestions:""===t.payload?[]:e.suggestions});case"SEARCHBOX_UPDATE_SUGGESTIONS":return Object(u.a)({},e,{suggestions:""===e.value?[]:t.payload});case"SEARCHBOX_SELECT_SUGGESTION":return Object(u.a)({},e,{selected:t.payload});case"SEARCHBOX_FINISH_LOADING":return Object(u.a)({},e,{loading:!1});default:return e}},NormalizationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NORMALIZATION":e=Object(u.a)({},e,{selectedNormalizationName:t.selectedNormalizationName,selectedNormalizationDisplayName:t.selectedNormalizationDisplayName});break;default:return e}return e},TrendingStoriesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"APPROVED_STORIES_LIST":case"USER_SELECTED_STORY":e=Object(u.a)({},e,{approvedStories:t.approvedStories,approvedStoriesLength:t.approvedStoriesLength,color:t.color,userSelectedStory:t.userSelectedStory,loading:t.loading});break;default:return e}return e},AdminStoriesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORIES_LIST":case"ADMIN_SELECTED_STORY":e=Object(u.a)({},e,{adminStories:t.adminStories,adminStoriesLength:t.adminStoriesLength,bgColor:t.bgColor,adminSelectedStory:t.adminSelectedStory,loading:t.loading});break;default:return e}return e},SideMenuReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isOpen:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SIDEMENU_OPEN":return{isOpen:!0};case"SIDEMENU_CLOSE":return{isOpen:!1};case"SIDEMENU_TOGGLE":return{isOpen:!e.isOpen};case"SIDEMENU_SET_STATE":return{isOpen:t.payload};default:return e}}});for(var b=a(8),f=a(9),g=a(11),y=a(10),E=a(12),v=a(799),S=a(802),O=a(797),T=a(21),N=a(777),R=a(770),j=a(771),k=(a(361),a(775)),C=a(780),A=a(776),w=a(25),L=a.n(w),x=a(17),I=a.n(x),D=(a(380),a(29)),_=a(318),U=a.n(_),z=a(194),P=a.n(z),F=(a(211),a(766)),B=a(767),V=a(768),H=a(769),M=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={dropdownOpen:!1,selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS",normalizationValues:[]},a.normalizationValuesCall=a.normalizationValuesCall.bind(Object(T.a)(a)),a.toggle=a.toggle.bind(Object(T.a)(a)),a.setSelectedNormalization=a.setSelectedNormalization.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.normalizationValuesCall()}},{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"setSelectedNormalization",value:function(e){this.props.dispatch({type:"CHANGE_NORMALIZATION",selectedNormalizationName:e.target.id,selectedNormalizationDisplayName:e.target.value})}},{key:"normalizationValuesCall",value:function(){var e=this;L.a.get("".concat(D.TRUTHTREE_URI,"/api/normalization_types")).then(function(t){e.setState({normalizationValues:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.normalizationValues.map(function(t,a){return r.a.createElement(F.a,{key:a,id:t.name,value:t.displayValue,onClick:e.setSelectedNormalization},t.displayValue)});return r.a.createElement("div",{id:"normalisation"},"Normalization attribute:",r.a.createElement(B.a,{id:"dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(V.a,{caret:!0}," ",this.props.selectedNormalizationDisplayName," "),r.a.createElement(H.a,null,t)))}}]),t}(n.Component),W=Object(i.b)(function(e){return{selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName,selectedNormalizationDisplayName:e.NormalizationReducer.selectedNormalizationDisplayName}},function(e){return{dispatch:e}})(M),G=a(43),Y=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={currentPopulation:0,currentLevel:null,data:{},selectedData:{},locationIds:[],selectedAttributes:[],year:2016,selectedNormalizationName:"GROSS",populationRange:[-25,25]},a.populationRangeCall=a.populationRangeCall.bind(Object(T.a)(a)),a.getFormattedName=a.getFormattedName.bind(Object(T.a)(a)),a.attributeCall=a.attributeCall.bind(Object(T.a)(a)),a.colFormatter=a.colFormatter.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({selectedAttributes:e.selectedAttributes,year:e.year,selectedNormalizationName:e.selectedNormalizationName,populationRange:e.populationRange,normalizationKeys:e.normalizationKeys});var a=I.a.pickBy(this.state.data,function(a){return a[1]<=t.state.currentPopulation+e.populationRange[1]/100*t.state.currentPopulation&&a[1]>=t.state.currentPopulation+e.populationRange[0]/100*t.state.currentPopulation});this.setState({selectedData:a,locationIds:I.a.keys(a)});var n=I.a.flatMap(e.selectedAttributes,function(e){return e[0]});n.length>0&&this.attributeCall(I.a.keys(a),n,e)}},{key:"attributeCall",value:function(e,t,a){var n=this,r=a.year?a.year:2016;L.a.get("/api/attributes?locationIds="+e+"&attributeIds="+t+"&normalizationType="+a.selectedNormalizationName+"&yearList="+r).then(function(e){var t=n.state.selectedData;I.a.map(e.data,function(e){I.a.map(e.attributes,function(n){t[e.location_id][n.attribute_id]="PER_CAPITA"===a.selectedNormalizationName?n.data[0].per_capita:"BY_REVENUE"===a.selectedNormalizationName?n.data[0].by_revenue:n.data[0].value})}),n.setState({selectedData:t})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.setState({data:{},selectedAttributes:this.props.selectedAttributes,year:this.props.yearSelected,selectedNormalizationName:this.props.selectedNormalizationName,populationRange:this.props.populationRange}),this.populationRangeCall()}},{key:"getFormattedName",value:function(e){return e.toLowerCase()===this.props.location.replace(/-/g," ")?r.a.createElement("b",null,I.a.capitalize(e)):I.a.capitalize(e)}},{key:"populationRangeCall",value:function(){var e=this,t=0,a=0,n={},r=0,o=this.state.year?this.state.year:2016;L.a.get("".concat(D.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+o).then(function(o){return(r=o.data.population)||Object(G.confirmAlert)({title:"Oops!",message:"The location you have selected does not seem to have data. Please go back and chose another location.",buttons:[{label:"OK"}]}),e.setState({currentPopulation:r}),a=Math.floor(r+.5*r),t=Math.floor(r-.5*r),L.a.get("".concat(D.TRUTHTREE_URI,"/api/").concat(e.props.level,"?populationRange=")+t+","+a).then(function(t){I.a.map(t.data,function(e){n[e.id]={name:e.name,1:e.population}}),e.setState({data:n});var a=I.a.pickBy(e.state.data,function(t){return t[1]<=r+e.state.populationRange[1]/100*r&&t[1]>=r+e.state.populationRange[0]/100*r});if(e.setState({selectedData:a}),e.setState({locationIds:I.a.keys(a)}),e.props.selectedAttributes){var o=I.a.flatMap(e.props.selectedAttributes,function(e){return e[0]});e.attributeCall(I.a.keys(a),o,e.state)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"colFormatter",value:function(e,t){var a="https://www.google.com/search?q="+t[0]+"+"+this.state.selectedAttributes[0][2]+" "+this.state.selectedAttributes[0][1];return r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e.toLocaleString())}},{key:"render",value:function(){var e=this,t=[{dataField:"id",text:"Id",hidden:!0},{dataField:"0",text:"Name",formatter:this.getFormattedName},{dataField:"1",text:"Population",sort:!0}];this.state.selectedAttributes.map(function(a,n){t.push({dataField:(n+2).toString(),text:a[1],sort:!0,formatter:e.colFormatter})});var a=[];I.a.values(this.state.selectedData).map(function(t,n){var r={};r.id=e.state.locationIds[n],r[0]=I.a.capitalize(t.name),r[1]=t[1].toLocaleString(),e.state.selectedAttributes.map(function(e,a){var n=t[e[0]]?t[e[0]]:"-";r[(a+2).toString()]=n}),a.push(r)});var n=z.CSVExport.ExportCSVButton;return r.a.createElement("div",{id:"mainDisplay"},r.a.createElement(W,null),r.a.createElement(P.a,{keyField:"id",data:a,columns:t,exportCSV:!0},function(e){return r.a.createElement("div",null,r.a.createElement(n,Object.assign({className:"btn btn-secondary"},e.csvProps),"Export as Csv"),r.a.createElement("hr",null),r.a.createElement(U.a,Object.assign({hover:!0,striped:!0},e.baseProps)))}))}}]),t}(n.Component),K=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName}})(Y),q=a(135),J=a(803),X=(a(151),a(431),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).isAttributeSelected=function(e){for(var t=0;t<a.props.selectedAttributes.length;t++)if(a.props.selectedAttributes[t][0]===e)return!0;return!1},a.handleClickCollection=function(e){a.setState(Object(q.a)({},e,!a.state[e]))},a.handleChangeSearch=function(e){var t=e.target.value.toLowerCase();t=(t=(t=t.replace("\\","")).replace("/","")).replace("*",""),a.setState({searchedString:t})},a.renderSearchTerm=function(e){if(""===a.state.searchedString||a.state.sidebarData[e].name.toLowerCase().search(a.state.searchedString)>-1)return!0;var t;for(t in a.state.sidebarData[e].attributes)if(a.state.sidebarData[e].attributes[t].name.toLowerCase().search(a.state.searchedString)>-1)return!0;return!1},a.state={sidebarData:[],isLoaded:!1,selectedAttributes:[],collapsedLeft:!1,searchedString:""},Object.keys(a.state.sidebarData).map(function(e){return a.state[e]=!1}),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;L.a.get("".concat(D.TRUTHTREE_URI,"/api/collections?locationId=")+this.props.match.params.id).then(function(t){e.setState({sidebarData:t.data,isLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"handleClickAttribute",value:function(e,t){for(var a=this,n=this.props.selectedAttributes,r=t.attribute_id,o=function(e){if(n[e][0]===r)return I.a.remove(n,function(t){return t===n[e]}),a.setState({selectedAttributes:n}),a.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n}),{v:void 0}},l=0;l<n.length;l++){var i=o(l);if("object"===typeof i)return i.v}n.length<10?(n.push([r,t.name,e]),this.setState({selectedAttributes:n}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n})):Object(G.confirmAlert)({title:"Error!",message:"Number of selected attributes exceeded limit of 10, please remove attributes to add more.",buttons:[{label:"OK"}]})}},{key:"collapseLeftBar",value:function(){this.setState({collapsedLeft:!this.state.collapsedLeft}),this.setState({searchedString:""})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?this.state.collapsedLeft?r.a.createElement("button",{className:window.innerWidth>800?"left-sidebar-button":"top-sidebar-button",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{style:{color:"white"},className:"fa fa-chevron-right"})):r.a.createElement("nav",{className:"scrollLeftBar col-md-2 d-md-block bg-dark sidebar "},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control leftSearch","data-spy":"affix","data-offset-top":"197",id:"attribute-search-box",onChange:this.handleChangeSearch,placeholder:"Search Attributes"})),r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),r.a.createElement("div",{style:{display:this.state.collapsedLeft?"none":"block"}},Object.keys(this.state.sidebarData).map(function(t,a){if(e.renderSearchTerm(t))return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"accordion",onClick:function(){return e.handleClickCollection(t)}},e.state.sidebarData[t].name),r.a.createElement("div",{style:{display:e.state[t]?"block":"none"}},Object.keys(e.state.sidebarData[t].attributes).map(function(a,n){return r.a.createElement("label",{onClick:function(){return e.handleClickAttribute(e.state.sidebarData[t].name,e.state.sidebarData[t].attributes[a])},key:n,className:"panel float-right attributes",style:{background:e.isAttributeSelected(e.state.sidebarData[t].attributes[a].attribute_id)?"#bfd9d5":"white"}},r.a.createElement("div",null,e.state.sidebarData[t].attributes[a].name))})))}))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component)),Z=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}},function(e){return{dispatch:e}})(Object(J.a)(X)),$={height:"200px",overflow:"auto"},Q=[],ee=1966;ee<2016;ee++)Q.push(ee+1);var te=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).toggle=a.toggle.bind(Object(T.a)(a)),a.state={dropdownOpen:!1,yearSelected:"2016"},a.onClick=a.onClick.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"onClick",value:function(e){this.props.dispatch({type:"CHANGE_YEAR",yearSelected:e.target.id})}},{key:"render",value:function(){var e=this,t=Q.map(function(t,a){return r.a.createElement(F.a,{key:a,id:t,onClick:e.onClick},t)});return r.a.createElement("div",null,window.innerWidth>800&&r.a.createElement("p",null,"Select year of data to be displayed:"),r.a.createElement(B.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(V.a,{caret:!0},this.props.yearSelected),r.a.createElement(H.a,{style:$},t)))}}]),t}(n.Component),ae=Object(i.b)(function(e){return{yearSelected:e.YearSelectorReducer.yearSelected}},function(e){return{dispatch:e}})(te),ne=(a(433),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={selectedAttributes:[]},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedAttribtes:this.props.selectedAttributes})}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes})}},{key:"deselectAttribute",value:function(e){for(var t=this,a=this.state.selectedAttributes,n=e[0],r=function(e){if(a[e][0]===n)return I.a.remove(a,function(t){return t===a[e]}),t.setState({selectedAttributes:a}),t.props.dispatch({type:"CHANGE_ATTRIBUTE",value:a}),{v:void 0}},o=0;o<a.length;o++){var l=r(o);if("object"===typeof l)return l.v}}},{key:"render",value:function(){var e=this;return this.state.selectedAttributes.length<1?r.a.createElement(R.a,null,r.a.createElement(j.a,{xs:"auto",className:"filters"},"Selected Attributes: None")):r.a.createElement(R.a,null,r.a.createElement(j.a,{xs:"auto",className:"filters"},"Selected Attributes:"),r.a.createElement(j.a,null,Object.keys(this.state.selectedAttributes).map(function(t,a){return r.a.createElement("button",{className:"btn btn-light selected-attribute-button",onClick:function(){return e.deselectAttribute(e.state.selectedAttributes[a])}},r.a.createElement("i",{className:"fa fa-times",style:{paddingRight:"10px"}}),e.state.selectedAttributes[a][2],"-",e.state.selectedAttributes[a][1])})))}}]),t}(n.Component)),re=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(ne),oe=a(347),le=(a(487),a(488),a(489),oe.a.Range),ie={"-50":"-50%","-40":"-40%","-30":"-30%","-20":"-20%","-10":"-10%",0:"0%",10:"10%",20:"+20%",30:"+30%",40:"+40%",50:"+50%"},ce=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).onSliderChange=function(e){console.log(),a.props.dispatch({type:"RANGE_SELECTION",populationRange:e})},a.state={locationPopulation:null,value:[-5,5],min:-50,max:50},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.yearSelected?this.props.yearSelected:2016,a="".concat(D.TRUTHTREE_URI,"/api/population?locationId=")+this.props.locationId+"&year="+t,n=null;L.a.get(a).then(function(t){n=t.data.population,e.setState({locationPopulation:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.attribute.attributeName.map(function(t,a){return r.a.createElement("div",{className:"outer",key:a},r.a.createElement("p",{className:"no-margin"},window.innerWidth>800?r.a.createElement("div",null,"Select range of ",t," for filtering other"," ",e.props.level,":"," "):r.a.createElement("div",null,"Filter ",e.props.level,": "),r.a.createElement("b",null,e.props.attribute.populationRange[0],"% to"," ",e.props.attribute.populationRange[1],"%")),r.a.createElement("br",null),r.a.createElement(le,{dots:!0,step:5,value:e.props.attribute.populationRange,min:e.state.min,max:e.state.max,marks:ie,onChange:e.onSliderChange}))});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null," ",t," ")))}}]),t}(n.Component),se=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,attribute:e.AttributeRangeReducer}},function(e){return{dispatch:e}})(ce),ue=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.label;(0,e.onClick)(t)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tab-list-item";return a===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),t}(n.Component),de=(a(225),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).onClickTabItem=function(e){a.setState({activeTab:e})},a.state={activeTab:a.props.children[0].props.label},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map(function(t){var n=t.props.label;return r.a.createElement(ue,{activeTab:a,key:n,label:n,onClick:e})})),r.a.createElement("div",{className:"tab-content"},t.map(function(e){if(e.props.label===a)return e.props.children})))}}]),t}(n.Component)),pe=a(320),me=a(772),he=a(800),be=a(778),fe=a(779),ge=a(196),ye=a.n(ge),Ee=a(326),ve=a.n(Ee),Se=a(774),Oe=a(798),Te=a(773),Ne=a(334),Re=a(335),je=a(146),ke=a(114),Ce=a(350),Ae=(a(250),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.attributeName;return"large"===this.props.condition?r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(me.a,{color:"info",className:"popupHeader"},this.props.collectionName," - ",this.props.attributeName)),r.a.createElement(Oe.a,{width:1050,height:450,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(Te.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(Ne.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(Re.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(je.a,null),r.a.createElement(ke.a,{verticalAlign:"bottom",iconSize:10}),this.props.locations.map(function(e,t){return r.a.createElement(Ce.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})}))):r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(me.a,{color:"info"}," ",this.props.collectionName," - ",this.props.attributeName," ")),r.a.createElement(Oe.a,{width:495,height:200,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(Te.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(Ne.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(Re.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(je.a,null),this.props.locations.map(function(e,t){return r.a.createElement(Ce.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})})))}}]),t}(n.Component)),we=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={loading:!0,locations:[],data:[],locationData:[],currentLevel:null,dataReal:[],locationIds:[],lineColors:["red","purple","green","blue","deeppink","orange","navy","slategray","lime","indianred","dimgrey"],populationRange:[-25,25]},a.fetchResponse=a.fetchResponse.bind(Object(T.a)(a)),a.formatResponse=a.formatResponse.bind(Object(T.a)(a)),a.initializeYearMap=a.initializeYearMap.bind(Object(T.a)(a)),a.fetchLocations=a.fetchLocations.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes}),0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"fetchLocations",value:function(){var e=this,t=0,a=0,n=this.props.yearSelected?this.props.yearSelected:2016,r={},o=0;L.a.get("".concat(D.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+n).then(function(n){return o=n.data.population,e.setState({currentPopulation:o}),a=Math.floor(o+.5*o),t=Math.floor(o-.5*o),L.a.get("".concat(D.TRUTHTREE_URI,"/api/").concat(e.props.level,"?populationRange=")+t+","+a).then(function(t){I.a.map(t.data,function(e){r[e.id]={name:e.name,1:e.population}}),e.setState({locationData:r});var a=I.a.pickBy(r,function(t){return t[1]<=o+e.props.populationRange[1]/100*o&&t[1]>=o+e.props.populationRange[0]/100*o});e.setState({locationIds:I.a.map(I.a.keys(a),I.a.toInteger)}),e.setState({locationData:r}),e.props.updateLocation(r,e.state.locationIds),e.fetchResponse()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"fetchResponse",value:function(){var e=this,t="".concat(D.TRUTHTREE_URI,"/api/attributes?locationIds=")+this.state.locationIds+"&attributeIds="+this.props.selectedAttributes[this.props.index][0]+"&normalizationType="+this.props.selectedNormalization;L.a.get(t).then(function(t){console.log(t),e.formatResponse(t)}).catch(function(e){console.log(e)})}},{key:"formatResponse",value:function(e){var t=this,a=[],n=[],r={};e.data.map(function(e){var a={},o=t.state.locationData[e.location_id].name;return e.attributes.map(function(l){if(l.data.map(function(a){var n=r[l.attribute_id];void 0===n&&(n=t.initializeYearMap());var i=n[a.year-1967];return 0!==i[e.location_id]&&void 0!==i[e.location_id]||("GROSS"===t.props.selectedNormalization?n[a.year-1967][o]=a.value:"PER_CAPITA"===t.props.selectedNormalization?n[a.year-1967][o]=a.per_capita:"BY_REVENUE"===t.props.selectedNormalization&&(n[a.year-1967][o]=a.by_revenue)),r[l.attribute_id]=n,null}),t.props.userSelectedLocations.includes(e.location_id)){a.id=e.location_id;var i=t.state.lineColors[n.length-1];a.color=i,a.name=o,n.push(a)}return null}),null}),a.push(r),this.setState({data:a,locations:n,loading:!1})}},{key:"initializeYearMap",value:function(){for(var e=[],t=1967;t<2017;t++){var a={year:t};e.push(a)}return e}},{key:"render",value:function(){var e=this,t=this.props.selectedAttributes.length,a=this.state.loading;return 0===t?r.a.createElement("div",null,"Select an attribute"):a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Se.a,{className:"align-self-center",color:"secondary",size:"sm"})):this.state.data.map(function(t,a){return r.a.createElement(Ae,{data:t[e.props.selectedAttributes[e.props.index][a]],attributeName:e.props.selectedAttributes[e.props.index][1],collectionName:e.props.selectedAttributes[e.props.index][2],locations:e.state.locations,condition:e.props.condition})})}}]),t}(n.Component),Le=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,year:e.YearSelectorReducer.yearSelected,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalization:e.NormalizationReducer.selectedNormalizationName}})(we),xe=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).ImageCapture=function(){var e=a.refs.image,t=a.attrId;console.log(t),ye.a.toJpeg(e,{quality:1}).then(function(e){var t=document.createElement("a");t.download="TruthTree.jpeg",t.href=e,t.click()}).catch(function(e){console.error("oops, something went wrong!",e)})},a.downloadAsZip=function(){var e=0,t=new ve.a,n=a.state.imageRefs,r=Object.values(n);Object.keys(n).map(function(a){var o=n[a];ye.a.toJpeg(o,{quality:1}).then(function(n){var o=t.folder("images"),l=n.split(",")[1];o.file(a+".jpeg",l,{base64:!0}),++e===r.length&&t.generateAsync({type:"blob"}).then(function(e){var t=document.createElement("a");t.download="TruthTree.zip",t.href=URL.createObjectURL(e),t.click()})}).catch(function(e){console.error("Error downloading zip",e)})})},a.handExpandClick=function(e){return a.setState({modal:!0,modalAttrIndex:e})},a.state={modal:!1,locations:{},locationIds:[],userSelectedLocations:[],imageUrls:[],imageRefs:{}},a.modalToggle=a.modalToggle.bind(Object(T.a)(a)),a.updateLocation=a.updateLocation.bind(Object(T.a)(a)),a.renderLocationList=a.renderLocationList.bind(Object(T.a)(a)),a.selectLocations=a.selectLocations.bind(Object(T.a)(a)),a.ImageCapture=a.ImageCapture.bind(Object(T.a)(a)),a.downloadAsZip=a.downloadAsZip.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"getAttributeNames",value:function(e){return I.a.flatMap(this.props.selectedAttributes,function(t){return"name"===e?t[1]:t[0]})}},{key:"updateLocation",value:function(e,t){var a=this.state.userSelectedLocations;0===a.length&&(a=t.length>10?t.slice(0,10):t),this.setState({locations:e,locationIds:t,userSelectedLocations:a})}},{key:"selectLocations",value:function(e){var t=Object.assign([],this.state.userSelectedLocations),a=parseInt(e.target.value);t.includes(a)?(t=t.filter(function(e){return e!==a}),this.setState({userSelectedLocations:t})):t.length<10?(t.push(a),this.setState({userSelectedLocations:t})):Object(G.confirmAlert)({title:"Error!",message:"Number of selected locations exceeded limit of 10, please remove existing location to add more.",buttons:[{label:"OK"}]})}},{key:"renderLocationList",value:function(){var e=this,t=this.state.locationIds.map(function(t){return r.a.createElement(j.a,{sm:"3",className:"form-check checkbox checkbox-circle checkbox-yellow"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:t,id:"checkbox-input",checked:e.state.userSelectedLocations.includes(t),onClick:e.selectLocations}),r.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox-input"},e.state.locations[t].name))});return r.a.createElement(R.a,{className:"location-list-padding"},t)}},{key:"render",value:function(){var e=this,t=this.getAttributeNames("name"),a=t.length,n=t.map(function(t,a){return r.a.createElement("div",{ref:function(a){void 0===e.state.imageRefs[t]&&(e.state.imageRefs[t]=a)}},r.a.createElement(k.a,{key:a,id:"cards"},r.a.createElement(A.a,{className:"time-series-card"},r.a.createElement(Le,{index:a,condition:"tiny",id:e.props.id,level:e.props.level,updateLocation:e.updateLocation,userSelectedLocations:e.state.userSelectedLocations,generateUrl:e.generateUrl}),r.a.createElement(pe.a,{className:"button",color:"secondary",onClick:function(){return e.handExpandClick(a)}},r.a.createElement(me.a,null,"Expand")))))});return 0===a?r.a.createElement(N.a,{className:"alert"}," ","Please select minimum of one attribute"," "):r.a.createElement(N.a,{className:"GridContainer"},r.a.createElement(R.a,null,r.a.createElement(k.a,null,r.a.createElement(A.a,null,r.a.createElement(R.a,null,r.a.createElement(W,null)),r.a.createElement("hr",null),r.a.createElement(R.a,{className:"SelectedLocations"},r.a.createElement("i",null,"Select locations from the selected range to be plotted in the graph:"," "),this.renderLocationList())))),r.a.createElement(R.a,null," ",r.a.createElement("div",{className:"Space"})),r.a.createElement(R.a,null,r.a.createElement(pe.a,{color:"secondary",onClick:this.downloadAsZip},r.a.createElement("i",{className:"fa fa-download icon-padding"}),"Download All")),r.a.createElement(R.a,null," ",r.a.createElement("div",{className:"Space"})),r.a.createElement(R.a,null,n,r.a.createElement(he.a,{isOpen:this.state.modal,toggle:this.modalToggle,className:"GridModal"},r.a.createElement("div",{ref:"image"},r.a.createElement(be.a,{className:"backgroundWhite"},r.a.createElement(Le,{index:this.state.modalAttrIndex,condition:"large",id:this.props.id,updateLocation:this.updateLocation,userSelectedLocations:this.state.userSelectedLocations,level:this.props.level}))),r.a.createElement(fe.a,null,r.a.createElement(pe.a,{color:"secondary",onClick:this.ImageCapture},"Download"),r.a.createElement(pe.a,{color:"secondary",onClick:this.modalToggle},"Cancel")))))}}]),t}(n.Component),Ie=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(xe),De={paddingTop:75},_e=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={openStory:!1,locationPopulation:null},a.modalToggle=a.modalToggle.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"modalToggle",value:function(){this.setState({openStory:!this.state.openStory})}},{key:"componentDidMount",value:function(){var e=this;this.props.dispatch({type:"CHANGE_YEAR",yearSelected:2016}),this.props.dispatch({type:"CHANGE_NORMALIZATION",selectedNormalizationName:"GROSS",selectedNormalizationDisplayName:"Gross"}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:[]}),this.props.dispatch({type:"RANGE_SELECTION",populationRange:[-25,25]}),L.a.get("".concat(D.TRUTHTREE_URI,"/api/population?locationId=")+this.props.match.params.id+"&year=2016").then(function(t){e.setState({locationPopulation:t.data.population})}).catch(function(e){return console.log(e+"ugh somethong")})}},{key:"render",value:function(){return r.a.createElement(N.a,{fluid:!0,style:De,className:"home"},r.a.createElement(R.a,null,r.a.createElement(Z,null),r.a.createElement("div",{className:"col-12 col-md-10 align-items-center padding"},r.a.createElement(k.a,{className:"selected-attributes padding"},r.a.createElement(re,null)),r.a.createElement(k.a,{className:"right-panel"},r.a.createElement(de,null,r.a.createElement("div",{label:"Table View"},r.a.createElement(K,{level:this.props.match.params.level,id:this.props.match.params.id,location:this.props.match.params.name})),r.a.createElement("div",{label:"Time Series View"},r.a.createElement(Ie,{id:this.props.match.params.id,level:this.props.match.params.level})))),r.a.createElement(k.a,{className:"bottom-panel"},r.a.createElement(C.a,{className:"bottom-panel-header"},r.a.createElement("div",null,"Selected Location: ",r.a.createElement("b",null,this.props.match.params.name),"\xa0\xa0\xa0\xa0 Population :",r.a.createElement("b",null,this.state.locationPopulation))),r.a.createElement(A.a,null,r.a.createElement(R.a,null,r.a.createElement(j.a,{className:"border-right"},r.a.createElement(se,{level:this.props.match.params.level,location:this.props.match.params.name,locationId:this.props.match.params.id})),r.a.createElement(j.a,{sm:"2",xs:"2"},r.a.createElement(ae,null))))))))}}]),t}(n.Component),Ue=Object(i.b)(function(e){return{dispatch:e}})(_e),ze=a(784),Pe=a(785),Fe=a(786),Be=a(787),Ve=a(788),He=a(789),Me=a(790),We=a(781),Ge=a(4),Ye=a.n(Ge),Ke=a(782),qe=a(783),Je=a(801),Xe=a(336),Ze=a.n(Xe),$e=a(190),Qe=a.n($e),et=function(e){return{type:"SEARCHBOX_UPDATE_VALUE",payload:e}},tt=function(e){return{type:"SEARCHBOX_UPDATE_SUGGESTIONS",payload:e}},at=function(e){return{type:"SEARCHBOX_SELECT_SUGGESTION",payload:e}},nt={0:"states",1:"counties",2:"cities"},rt=function(e){var t=e.name,a=e.parent;return t+=a?a.parent?", ".concat(a.name,", ").concat(a.parent.name):", ".concat(a.name):""},ot=function(e){return"/explore/".concat(nt[e.typeCode],"/").concat(e.name.toLowerCase().replace(" ","-"),"/").concat(e.id)},lt="/api/search",it={zIndex:1,position:"relative"},ct=function(e){return r.a.createElement(We.a,{className:"text-secondary",to:ot(e)},rt(e))},st=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleInputChange=function(e,t){var n=t.newValue;a.props.dispatch(et(n))},a.handleSuggestionSelected=function(e,t){var n=t.suggestion,r=a.props,o=r.dispatch,l=r.selectable,i=r.value;o(l?at(n):et(i))},a.handleSuggestionsFetchRequested=function(e){var t=e.value;Object(w.post)(lt,{text:t}).then(function(e){return a.props.dispatch(tt(e.data))}).catch(function(e){return console.log(e)})},a.renderInputComponent=function(e){return r.a.createElement("div",null,r.a.createElement(Ke.a,null,r.a.createElement(qe.a,Object.assign({},e,{id:"location-search-box",name:"location-search-box",placeholder:"Try something like Seattle or Boston",innerRef:function(e){a.inputRef=e}})),r.a.createElement(Je.a,{addonType:"append"},r.a.createElement("label",{className:"btn btn-light mb-0"},r.a.createElement("i",{className:"fa fa-chevron-up"})))))},a.debouncedhandleSuggestionsFetchRequested=Qe()(a.handleSuggestionsFetchRequested,250),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.inputRef.focus()}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.suggestions,n={value:t,onChange:this.handleInputChange};return r.a.createElement(Ze.a,{theme:{container:it,suggestionsList:"list-group position-absolute w-100 overflow-y",suggestion:"list-group-item"},suggestions:a,onSuggestionsFetchRequested:this.debouncedhandleSuggestionsFetchRequested,onSuggestionSelected:this.handleSuggestionSelected,onSuggestionsClearRequested:function(){return null},getSuggestionValue:rt,renderInputComponent:this.renderInputComponent,renderSuggestion:ct,inputProps:n})}}]),t}(n.Component),ut=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,suggestions:e.LocationSearchBoxReducer.suggestions,loading:e.LocationSearchBoxReducer.loading}})(Object(J.a)(st)),dt=function(){return{type:"SIDEMENU_CLOSE"}},pt=a(337),mt=a.n(pt),ht={backgroundColor:"rgba(13, 22, 38, 0.8)"},bt={"&:hover":{textDecoration:"none"}},ft={width:50},gt={maxWidth:800},yt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a.shouldShowSearchBox=function(){var e=a.props,t=e.searchPhrase;return"/"===e.location.pathname&&""!==t},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=Ye()({"flex-grow-1":!0,"d-none":!this.shouldShowSearchBox()}),a=this.state.collapseOpen;return r.a.createElement(ze.a,{style:ht,expand:"md",className:"fixed-top space-between"},r.a.createElement(Pe.a,{className:"text-primary",style:bt},r.a.createElement(We.a,{to:"/"},r.a.createElement("img",{src:mt.a,style:ft,className:"d-inline-block",alt:"TruthTree logo"}),r.a.createElement("span",null,"\xa0TruthTree"))),r.a.createElement(Fe.a,{className:"navbar-dark",onClick:function(){return e.setState({collapseOpen:!a})}}),r.a.createElement(Be.a,{isOpen:!0,navbar:!0},r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center"},r.a.createElement("div",{style:gt,className:t},r.a.createElement(ut,null)))),r.a.createElement(Be.a,{isOpen:a,navbar:!0,className:"flex-grow-0"},r.a.createElement(Ve.a,{className:"ml-auto px-md-3",navbar:!0,onClick:function(){return e.setState({collapseOpen:!1})}},r.a.createElement(He.a,null,r.a.createElement(Me.a,{className:"d-flex justify-content-center",tag:We.a,to:"/"},"Explore")),r.a.createElement(He.a,null,r.a.createElement(Me.a,{className:"d-flex justify-content-center",tag:We.a,to:"/stories"},"Stories")),r.a.createElement(He.a,null,r.a.createElement(Me.a,{className:"d-flex justify-content-center",tag:We.a,to:"/about"},"About"))),r.a.createElement("div",null,r.a.createElement(pe.a,{color:"outline-primary",block:!0,onClick:function(){e.setState({collapseOpen:!1}),e.props.dispatch({type:"SIDEMENU_OPEN"})}},"Create a story"))))}}]),t}(n.Component),Et=Object(J.a)(Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(yt)),vt=a(791),St=(a(663),{paddingTop:70}),Ot=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{fluid:!0,style:St,className:"about"},r.a.createElement(vt.a,{className:"float-center"},r.a.createElement("h1",{className:"text-primary"},"TruthTree"),r.a.createElement("p",null,"A Public Data Vizipedia/Wiki-Laboratory"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",{className:"lead"},"TruthTree seeks to unite all the public data in the world into a data-visualization tool and reference platform that can facilitate data-driven understanding and consensus regarding geography, politics, and culture for geographical entities at all scales."),r.a.createElement("p",{className:"lead"})))}}]),t}(n.Component),Tt=a(338),Nt=a.n(Tt),Rt=a(48),jt=a.n(Rt),kt=a(339),Ct={height:"100%",width:"100%"},At=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={center:{lat:37.09024,lng:-95.712891},zoom:5,markers:[]},a.renderMarkers=function(e){if(a.map&&a.maps){a.setMarkersMap(a.state.markers,null);var t=e.map(function(e){var t=new a.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:a.map,animation:a.maps.Animation.DROP}),n=new a.maps.InfoWindow({content:"\n            <div>\n              ".concat(rt(e),"\n            </div>\n          "),maxWidth:200});return n.open(a.map,t),t.addListener("click",function(){n.open(a.map,t),a.props.history.push(ot(e))}),t.addListener("mouseover",function(){n.open(a.map,t)}),t});a.setState({markers:t})}},a.setMarkersMap=function(e,t){e.forEach(function(e){return e.setMap(t)})},a.handleApiLoaded=function(e,t){a.maps=t,a.map=e,e.setOptions({styles:kt,fullscreenControlOptions:{position:t.ControlPosition.BOTTOM_RIGHT}}),a.renderMarkers(a.props.suggestions)},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentWillReceiveProps",value:function(e){jt()(this.props.suggestions,e.suggestions)||this.renderMarkers(e.suggestions)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:Ct,className:"position-absolute"},r.a.createElement(Nt.a,{bootstrapURLKeys:{key:"AIzaSyD6S0fXIE22l64bV3nhv-EB-7K1gh39nqs"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}}))}}]),t}(n.Component),wt=Object(J.a)(Object(i.b)(function(e){return{suggestions:e.LocationSearchBoxReducer.suggestions}})(At)),Lt=a(792),xt=function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).handleInputChange=function(e){e.target.blur(),a.props.dispatch(et(e.target.value))},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(){""===this.props.value&&this.inputRef.focus()}},{key:"render",value:function(){var e=this,t=this.props,a=t.value,n=t.loading;return r.a.createElement(N.a,null,r.a.createElement(R.a,{className:"py-3"},n?r.a.createElement(j.a,{className:"d-flex justify-content-center"},r.a.createElement(Se.a,{className:"align-self-center",color:"primary"})):r.a.createElement(j.a,null,r.a.createElement(Lt.a,{style:{cursor:"pointer",color:"white"},for:"dummy-search-box"},"Search for a U.S location:"),r.a.createElement(qe.a,{innerRef:function(t){e.inputRef=t},id:"dummy-search-box",value:a,onChange:this.handleInputChange,placeholder:"Try something like Seattle or Boston"}))))}}]),t}(n.Component),It=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,loading:e.LocationSearchBoxReducer.loading}})(xt),Dt=a(340),_t=a.n(Dt),Ut={color:"white"},zt=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement(R.a,null,r.a.createElement(j.a,{style:Ut},r.a.createElement("h1",{className:"text-primary"},"Welcome to TruthTree"),r.a.createElement(_t.a,{avgTypingDelay:20,cursor:{hideWhenDone:!0}},"We're an open source data visualization project that focuses on U.S government financial spending. \xa0",r.a.createElement(We.a,{to:"/about"},"Find out more")))))}}]),t}(n.Component),Pt={marginBottom:"12em",backgroundColor:"rgba(13, 22, 38, 0.7)"},Ft=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.searchPhrase,t=Ye()({"d-none":""!==e});return r.a.createElement(N.a,{className:t},r.a.createElement(R.a,null,r.a.createElement(j.a,{style:Pt,xs:12,sm:11,md:9,lg:6,className:"py-3 px-4"},r.a.createElement(zt,null),r.a.createElement(It,null))))}}]),t}(n.Component),Bt=Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(Ft),Vt={flex:"1 1 100%"},Ht=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:Vt,className:"d-flex align-items-center position-relative"},r.a.createElement(wt,null),r.a.createElement(Bt,null))}}]),t}(n.Component),Mt=(a(683),a(793)),Wt=a(794),Gt=(a(289),a(74)),Yt=a.n(Gt),Kt=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleUpVoteClick=a.handleUpVoteClick.bind(Object(T.a)(a)),a.handleDownVoteClick=a.handleDownVoteClick.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"contentHtml",value:function(e){return Yt()(e)}},{key:"handleUpVoteClick",value:function(e){var t=this,a=e.id+"up";localStorage.getItem(a)?Object(G.confirmAlert)({title:"Thank You!",message:"You have upvoted the story previously.",buttons:[{label:"OK"}]}):(console.log(JSON.stringify(e)),L()({method:"put",url:"".concat(D.TRUTHTREE_URI,"/api/stories?type=UPVOTE"),data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(a){var n=t.props.TrendingStoriesReducer.approvedStories,r=I.a.findIndex(n,{id:e.id});n.splice(r,1,a.data);var o=e.id+"up";localStorage.setItem(o,"true"),t.props.dispatch({type:"USER_SELECTED_STORY",approvedStories:n,approvedStoriesLength:n.length,color:t.props.TrendingStoriesReducer.color,userSelectedStory:a.data,loading:!1})}).catch(function(e){console.log(e)}))}},{key:"handleDownVoteClick",value:function(e){var t=this,a=e.id+"down";localStorage.getItem(a)?Object(G.confirmAlert)({title:"Thank You!",message:"You have downvoted the story previously.",buttons:[{label:"OK"}]}):(console.log(JSON.stringify(e)),L()({method:"put",url:"".concat(D.TRUTHTREE_URI,"/api/stories?type=DOWNVOTE"),data:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(function(a){var n=t.props.TrendingStoriesReducer.approvedStories,r=I.a.findIndex(n,{id:e.id});n.splice(r,1,a.data);var o=e.id+"down";localStorage.setItem(o,"true"),t.props.dispatch({type:"USER_SELECTED_STORY",approvedStories:n,approvedStoriesLength:n.length,color:t.props.TrendingStoriesReducer.color,userSelectedStory:a.data,loading:!1})}).catch(function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return"none"===this.props.TrendingStoriesReducer.userSelectedStory?r.a.createElement("div",null,r.a.createElement(Mt.a,{color:"primary"},"Please select a story to view its details!")):r.a.createElement(k.a,{className:"view-story"},r.a.createElement(Wt.a,null,r.a.createElement(Wt.a,{body:!0},r.a.createElement(Wt.a,{heading:!0},r.a.createElement(C.a,null,this.props.TrendingStoriesReducer.userSelectedStory.title)),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto",style:{marginTop:"5px"}},r.a.createElement("i",null," Tags: ")),r.a.createElement(j.a,null,I.a.map(this.props.TrendingStoriesReducer.userSelectedStory.tags,function(e){return r.a.createElement(me.a,{className:"tag view",color:"secondary"},e)}))),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto"},r.a.createElement("i",null,"Description:")),r.a.createElement(j.a,null,this.contentHtml(this.props.TrendingStoriesReducer.userSelectedStory.content))),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto"}," ",r.a.createElement("i",null,"Author:")),r.a.createElement(j.a,null,r.a.createElement("b",null,this.props.TrendingStoriesReducer.userSelectedStory.author))),r.a.createElement(R.a,{className:"view float-right"},r.a.createElement(j.a,{xs:"auto"},r.a.createElement(pe.a,{className:"fa fa-thumbs-o-up thumb view-story",color:"primary",onClick:function(){return e.handleUpVoteClick(e.props.TrendingStoriesReducer.userSelectedStory)}},"\xa0",this.props.TrendingStoriesReducer.userSelectedStory.upvote)),r.a.createElement(j.a,{xs:"auto"},r.a.createElement(pe.a,{className:"fa fa-thumbs-o-down thumb view-story",color:"primary",onClick:function(){return e.handleDownVoteClick(e.props.TrendingStoriesReducer.userSelectedStory)}},"\xa0",this.props.TrendingStoriesReducer.userSelectedStory.downvote))))))}}]),t}(n.Component),qt=Object(i.b)(function(e){return{TrendingStoriesReducer:e.TrendingStoriesReducer}},function(e){return{dispatch:e}})(Kt),Jt=(a(301),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleChangeSearch=function(e){var t=e.target.value.toLowerCase();t=(t=t.replace("\\","")).replace("*",""),a.setState({searchBoxText:t}),console.log(t),""==t?L.a.get("".concat(D.TRUTHTREE_URI,"/api/stories?storyStatus=APPROVED")).then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push("white");a.props.dispatch({type:"APPROVED_STORIES_LIST",approvedStories:e.data,approvedStoriesLength:e.data.length,color:t,userSelectedStory:"none",loading:!1})}).catch(function(e){console.log(e)}):a.submitSearch(t)},a.submitSearch=function(e){L.a.get("".concat(D.TRUTHTREE_URI,"/api/stories/search?keyword=")+e+"&pageSize=999&pageNumber=1").then(function(e){for(var t=[],n=0;n<e.data.length;n++)t.push("white");a.props.dispatch({type:"APPROVED_STORIES_LIST",approvedStories:e.data,approvedStoriesLength:e.data.length,color:t,userSelectedStory:"none",loading:!1})}).catch(function(e){console.log(e)})},a.getStoryDetails=a.getStoryDetails.bind(Object(T.a)(a)),a.selectStory=a.selectStory.bind(Object(T.a)(a)),a.state={data:[],length:0,bgColor:[],searchBoxText:"",searchedTags:[],loading:!0,InitialData:[]},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"contentHtml",value:function(e){return Yt()(e)}},{key:"componentDidMount",value:function(){var e=this;L.a.get("".concat(D.TRUTHTREE_URI,"/api/stories?storyStatus=APPROVED")).then(function(t){for(var a=[],n=0;n<t.data.length;n++)a.push("white");e.props.dispatch({type:"APPROVED_STORIES_LIST",approvedStories:t.data,approvedStoriesLength:t.data.length,color:a,userSelectedStory:"none",loading:!1})}).catch(function(e){console.log(e)})}},{key:"selectStory",value:function(e,t){for(var a=[],n=0;n<this.props.TrendingStoriesReducer.approvedStoriesLength;n++)n===t?a.push("#f2f2f2"):a.push("white");this.setState({bgColor:a}),this.props.dispatch({type:"USER_SELECTED_STORY",approvedStories:this.props.TrendingStoriesReducer.approvedStories,approvedStoriesLength:this.props.TrendingStoriesReducer.approvedStoriesLength,color:a,userSelectedStory:e,loading:!1}),this.setState({bgColor:this.props.TrendingStoriesReducer.color})}},{key:"getStoryDetails",value:function(){var e=this;return r.a.createElement(Wt.a,{body:!0},I.a.map(I.a.sortBy(this.props.TrendingStoriesReducer.approvedStories,[function(e){return e.upvote-e.downvote}]).reverse(),function(t,a){return r.a.createElement(k.a,{className:"pointer",onClick:function(){return e.selectStory(t,a)},style:{backgroundColor:e.props.TrendingStoriesReducer.color[a]}},r.a.createElement(Wt.a,{heading:!0,className:"trending"},t.title),r.a.createElement(R.a,{className:"trending"},I.a.map(t.tags,function(e){return r.a.createElement(me.a,{className:"tag",color:"secondary"},e)})),r.a.createElement(R.a,{className:"trending"},r.a.createElement("div",{style:{padding:"10px"}},e.contentHtml(I.a.truncate(t.content,{length:50})))),!e.props.admin&&r.a.createElement(R.a,{className:"trending"},r.a.createElement("i",{className:"fa fa-thumbs-o-up thumb"}," ",t.upvote," "),r.a.createElement("i",{className:"fa fa-thumbs-o-down thumb"}," ",t.downvote," ")))}))}},{key:"render",value:function(){return this.props.TrendingStoriesReducer.loading?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Se.a,{className:"align-self-center",color:"secondary",size:"sm"})):r.a.createElement("div",null,r.a.createElement("input",{className:"form-control searchBar","data-spy":"affix",onChange:this.handleChangeSearch,placeholder:"Search stories by title or tag name"}),r.a.createElement("div",null,r.a.createElement(Wt.a,{className:"trending-height"},this.getStoryDetails())))}}]),t}(n.Component)),Xt=Object(i.b)(function(e){return{TrendingStoriesReducer:e.TrendingStoriesReducer}},function(e){return{dispatch:e}})(Jt),Zt=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(N.a,{className:"stories-page"},r.a.createElement(k.a,null,r.a.createElement(C.a,{className:"trending-card"},r.a.createElement(R.a,null,r.a.createElement(j.a,{className:"trending-label"},"Trending Stories "))),r.a.createElement(A.a,null,r.a.createElement(R.a,null,r.a.createElement(j.a,{className:"border-right"},r.a.createElement(Xt,null)),r.a.createElement(j.a,{className:"trending-stories-overflow"},r.a.createElement(qt,null))))))}}]),t}(n.Component),$t=a(795),Qt=(a(302),function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).getStoryDetails=a.getStoryDetails.bind(Object(T.a)(a)),a.selectStory=a.selectStory.bind(Object(T.a)(a)),a.state={InitialData:[],bgColor:[]},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"contentHtml",value:function(e){return Yt()(e)}},{key:"componentDidMount",value:function(){var e=this;L.a.get("".concat(D.TRUTHTREE_URI,"/api/stories?storyStatus=PENDING")).then(function(t){for(var a=[],n=0;n<t.data.length;n++)a.push("white");e.props.dispatch({type:"STORIES_LIST",adminStories:t.data,adminStoriesLength:t.data.length,bgColor:a,adminSelectedStory:"none",loading:!1})}).catch(function(e){console.log(e)})}},{key:"selectStory",value:function(e,t){for(var a=[],n=0;n<this.props.AdminStoriesReducer.adminStoriesLength;n++)n===t?a.push("#f2f2f2"):a.push("white");this.setState({bgColor:a}),this.props.dispatch({type:"ADMIN_SELECTED_STORY",adminStories:this.props.AdminStoriesReducer.adminStories,adminStoriesLength:this.props.AdminStoriesReducer.adminStoriesLength,bgColor:a,adminSelectedStory:e,loading:!1}),this.setState({bgColor:this.props.AdminStoriesReducer.bgColor})}},{key:"getStoryDetails",value:function(){var e=this;return r.a.createElement(Wt.a,{body:!0},I.a.map(I.a.sortBy(this.props.AdminStoriesReducer.adminStories,[function(e){return e.upvote-e.downvote}]).reverse(),function(t,a){return r.a.createElement(k.a,{className:"pointer",onClick:function(){return e.selectStory(t,a)},style:{backgroundColor:e.props.AdminStoriesReducer.bgColor[a]}},r.a.createElement(Wt.a,{heading:!0,className:"trending"},t.title),r.a.createElement(R.a,{className:"trending"},I.a.map(t.tags,function(e){return r.a.createElement(me.a,{className:"tag",color:"secondary"},e)})),r.a.createElement(R.a,{className:"trending"},r.a.createElement("div",{style:{padding:"10px"}},e.contentHtml(I.a.truncate(t.content,{length:50})))))}))}},{key:"render",value:function(){return this.props.AdminStoriesReducer.loading?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Se.a,{className:"align-self-center",color:"secondary",size:"sm"})):r.a.createElement("div",null,r.a.createElement("input",{className:"form-control searchBar","data-spy":"affix",placeholder:"Search stories by title or tag name"}),r.a.createElement("div",null,r.a.createElement(Wt.a,{className:"trending-height"},this.getStoryDetails())))}}]),t}(n.Component)),ea=Object(i.b)(function(e){return{AdminStoriesReducer:e.AdminStoriesReducer}},function(e){return{dispatch:e}})(Qt),ta=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleApprove=a.handleApprove.bind(Object(T.a)(a)),a.handleDecline=a.handleDecline.bind(Object(T.a)(a)),a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"contentHtml",value:function(e){return Yt()(e)}},{key:"handleApprove",value:function(e){var t=this;L.a.put("".concat(D.TRUTHTREE_URI,"/api/stories/story/APPROVED/")+e).then(function(a){var n=[];if(200===a.status){n=I.a.filter(t.props.adminStories,function(t){return t.id!==e});for(var r=[],o=0;o<n.length;o++)r.push("white");t.props.dispatch({type:"STORIES_LIST",adminStories:n,adminStoriesLength:n.length,bgColor:r,adminSelectedStory:"none",loading:!1}),Object(G.confirmAlert)({title:"Approved!",message:"The story has been approved",buttons:[{label:"OK"}]})}}).catch(function(e){console.log(e)})}},{key:"handleDecline",value:function(e){var t=this;L.a.put("".concat(D.TRUTHTREE_URI,"/api/stories/story/DISAPPROVED/")+e).then(function(a){var n=[];if(200===a.status){n=I.a.filter(t.props.adminStories,function(t){return t.id!==e});for(var r=[],o=0;o<n.length;o++)r.push("white");t.props.dispatch({type:"STORIES_LIST",adminStories:n,adminStoriesLength:n.length,bgColor:r,adminSelectedStory:"none",loading:!1}),Object(G.confirmAlert)({title:"Declined!",message:"The story has been declined",buttons:[{label:"OK"}]})}}).catch(function(e){console.log(e)})}},{key:"handleDelete",value:function(e){var t=this;L.a.delete("".concat(D.TRUTHTREE_URI,"/api/stories/")+e).then(function(a){var n=[];if(200===a.status){n=I.a.filter(t.props.adminStories,function(t){return t.id!==e});for(var r=[],o=0;o<n.length;o++)r.push("white");t.props.dispatch({type:"STORIES_LIST",adminStories:n,adminStoriesLength:n.length,bgColor:r,adminSelectedStory:"none",loading:!1}),Object(G.confirmAlert)({title:"Deleted!",message:"The story has been deleted",buttons:[{label:"OK"}]})}}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this;return"none"===this.props.adminSelectedStory?r.a.createElement("div",null,r.a.createElement(Mt.a,{color:"primary"},"Please select a story to view its details!")):r.a.createElement(k.a,{className:"view-story"},r.a.createElement(Wt.a,null,r.a.createElement(Wt.a,{body:!0},r.a.createElement(Wt.a,{heading:!0},r.a.createElement(C.a,null,this.props.adminSelectedStory.title)),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto",style:{marginTop:"5px"}},r.a.createElement("i",null," Tags: ")),r.a.createElement(j.a,null,I.a.map(this.props.adminSelectedStory.tags,function(e){return r.a.createElement(me.a,{className:"tag view",color:"secondary"},e)}))),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto"},r.a.createElement("i",null,"Description:")),r.a.createElement(j.a,null,this.contentHtml(this.props.adminSelectedStory.content))),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto"}," ",r.a.createElement("i",null,"Author:")),r.a.createElement(j.a,null,r.a.createElement("b",null,this.props.adminSelectedStory.author))),r.a.createElement(R.a,{className:"view"},r.a.createElement(j.a,{xs:"auto"},r.a.createElement(pe.a,{className:"myButton",color:"primary",size:"sm",onClick:function(){return e.handleApprove(e.props.adminSelectedStory.id)}},"Approve")),r.a.createElement(j.a,{xs:"auto"},r.a.createElement(pe.a,{className:"myButton",color:"primary",size:"sm",onClick:function(){return e.handleDecline(e.props.adminSelectedStory.id)}},"Decline")),r.a.createElement(j.a,{xs:"auto"},r.a.createElement(pe.a,{className:"myButton",color:"danger",size:"sm",onClick:function(){return e.handleDelete(e.props.adminSelectedStory.id)}},"Delete"))))))}}]),t}(n.Component),aa=Object(i.b)(function(e){return{adminSelectedStory:e.AdminStoriesReducer.adminSelectedStory,adminStories:e.AdminStoriesReducer.adminStories}},function(e){return{dispatch:e}})(ta),na=function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(k.a,null,r.a.createElement(C.a,{className:"admin-panel-header"},r.a.createElement(j.a,null,"Stories To Be Approved ")),r.a.createElement(A.a,null,r.a.createElement(R.a,null,r.a.createElement(j.a,{className:"border-right"},r.a.createElement(ea,null)),r.a.createElement(j.a,{className:"border-right overflow"},r.a.createElement(aa,null)))))}}]),t}(n.Component),ra=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).validatePassword=a.validatePassword.bind(Object(T.a)(a)),a.password=r.a.createRef(),a.state={isFirstLoad:!0,isAuthenticated:!1},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"validatePassword",value:function(){this.setState({isFirstLoad:!1});var e=this;L()({method:"post",url:"".concat(D.TRUTHTREE_URI,"/api/login"),headers:{"Content-Type":"text/plain"},data:this.password.current.value}).then(function(t){!0===t.data&&e.setState({isAuthenticated:!0})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return r.a.createElement(N.a,{className:"stories-page"},!this.state.isAuthenticated&&r.a.createElement(vt.a,{className:"float-center"},r.a.createElement($t.a,{className:"mb-2 mr-sm-2 mb-sm-0 "},!this.state.isFirstLoad&&!this.state.isAuthenticated&&r.a.createElement(Mt.a,{color:"danger"},"Incorrect Password! Please enter correct password to login"),r.a.createElement("br",null),!this.state.isAuthenticated&&r.a.createElement("div",null,r.a.createElement("h1",{className:"text-primary"},"Welcome to TruthTree Admin login!"),r.a.createElement(R.a,{style:{paddingLeft:"25px"}},r.a.createElement(Lt.a,{for:"adminPassword",className:"mr-sm-2"},"Please enter admin password for authentication")),r.a.createElement(R.a,{style:{paddingLeft:"25px"}},r.a.createElement(qe.a,{innerRef:this.password,type:"password",name:"password",id:"adminPassword",placeholder:"password"})),r.a.createElement("br",null),r.a.createElement(R.a,{style:{paddingLeft:"25px"}},r.a.createElement(pe.a,{onClick:this.validatePassword},"Submit"))))),this.state.isAuthenticated&&r.a.createElement(na,null))}}]),t}(n.Component),oa=a(341),la=a(349),ia=a(796),ca=a(342),sa=a.n(ca),ua=a(343),da=a.n(ua),pa=(a(738),a(344)),ma=a.n(pa),ha=function(e){var t=e.inputValue,a=e.tagsWithLabels,n=e.onChange,o=e.onInputChange,l=e.onKeyDown;return r.a.createElement(ma.a,{components:{DropdownIndicator:null},inputValue:t,isClearable:!0,isMulti:!0,menuIsOpen:!1,onChange:n,onInputChange:o,onKeyDown:l,placeholder:"Tags",value:a})},ba=(a(759),{featureEnabled:!0,isSubmitting:!1,isHuman:!1,shouldShowCaptchaError:!1,shouldShowAuthorFieldError:!1,authorFieldValue:"",titleFieldValue:"",shouldShowTitleFieldError:!1,tagsWithLabels:[],tagFieldValue:"",bodyFieldValue:"",bodyFieldTextOnly:"",shouldShowBodyFieldError:!1}),fa=function(e){return{label:e,value:e}},ga=function(e){function t(e){var a;return Object(b.a)(this,t),(a=Object(g.a)(this,Object(y.a)(t).call(this,e))).modules={toolbar:[[{header:[1,2,!1]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]]},a.handleChangeAuthor=function(e){a.setState({authorFieldValue:e.target.value,shouldShowAuthorFieldError:!0})},a.handleChangeTitle=function(e){a.setState({titleFieldValue:e.target.value,shouldShowTitleFieldError:!0})},a.handleTagFieldInputChange=function(e){a.setState({tagFieldValue:e})},a.handleTagsChange=function(e){a.setState({tagsWithLabels:e})},a.handleTagFieldKeyDown=function(e){var t=a.state,n=t.tagFieldValue,r=t.tagsWithLabels;if(n)switch(e.key){case"Enter":case"Tab":if(r.some(function(e){return e.value===n}))a.setState({tagFieldValue:""});else{var o=[].concat(Object(la.a)(r),[fa(n)]);a.setState({tagFieldValue:"",tagsWithLabels:o})}e.preventDefault()}},a.handleChangeStory=function(e,t,n,r){var o=r.getText();a.setState({bodyFieldValue:e,bodyFieldTextOnly:o.slice(0,o.length-1),shouldShowBodyFieldError:!0})},a.handleDiscard=function(){a.recaptchaInstance.reset(),a.setState(ba,function(){return a.setState({shouldShowBodyFieldError:!1})}),a.props.dispatch(dt())},a.submitForm=function(){var e=a.state,t=e.isHuman,n=e.authorFieldValue,r=e.titleFieldValue,o=e.tagsWithLabels,l=e.bodyFieldValue,i=e.bodyFieldTextOnly;a.setState({isSubmitting:!0},function(){[t,n,r,i].some(function(e){return!e})?a.setState({isSubmitting:!1,shouldShowAuthorFieldError:!0,shouldShowTitleFieldError:!0,shouldShowBodyFieldError:!0,shouldShowCaptchaError:!0}):L.a.post("".concat(D.TRUTHTREE_URI,"/api/stories"),{author:n,title:r,tags:o.map(function(e){return e.value}),content:l,rawContent:i}).then(function(){a.handleDiscard(),Object(G.confirmAlert)({title:"Story submitted!",message:"Story is now pending review.",buttons:[{label:"Continue."}]})}).catch(console.log)})},a.state=ba,a.recaptchaInstance=null,a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({featureEnabled:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.isSubmitting,n=t.isHuman,o=t.shouldShowCaptchaError,l=t.authorFieldValue,i=t.shouldShowAuthorFieldError,c=t.titleFieldValue,s=t.shouldShowTitleFieldError,u=t.tagFieldValue,d=t.tagsWithLabels,p=t.bodyFieldValue,m=t.bodyFieldTextOnly,h=t.shouldShowBodyFieldError;return this.state.featureEnabled?r.a.createElement("div",{className:"story-creation-form"},r.a.createElement("h2",null,"Create a story"),r.a.createElement($t.a,null,r.a.createElement(qe.a,{invalid:i&&!l,onChange:this.handleChangeAuthor,value:l,placeholder:"Author Name *"}),r.a.createElement(ia.a,null,"Author can't be blank")),r.a.createElement($t.a,null,r.a.createElement(qe.a,{invalid:s&&!c,onChange:this.handleChangeTitle,value:c,placeholder:"Story Title *"}),r.a.createElement(ia.a,null,"Title can't be blank")),r.a.createElement($t.a,{className:"position-relative"},r.a.createElement(ha,{inputValue:u,tagsWithLabels:d,onChange:this.handleTagsChange,onInputChange:this.handleTagFieldInputChange,onKeyDown:this.handleTagFieldKeyDown})),r.a.createElement($t.a,null,r.a.createElement(sa.a,{onChange:this.handleChangeStory,modules:this.modules,value:p,placeholder:"Tell us what you found"}),r.a.createElement("small",{className:"".concat(h&&!m?"":"d-none"," text-danger")},"Body can't be blank")),r.a.createElement($t.a,null,r.a.createElement(da.a,{ref:function(t){return e.recaptchaInstance=t},sitekey:"6Ldb85sUAAAAAKe6zdfI6jMm2SBDTzvmJ8iOP9kV",render:"explicit",theme:"dark",verifyCallback:function(){return e.setState({isHuman:!0})}}),r.a.createElement("small",{className:"".concat(!n&&o?"":"d-none"," text-danger")},"Hello fellow bot")),a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(Se.a,null)):r.a.createElement("div",null,r.a.createElement(pe.a,{color:"primary",onClick:this.submitForm,block:!0},"Submit"),r.a.createElement(pe.a,{color:"secondary",onClick:this.handleDiscard,block:!0},"Discard"))):r.a.createElement("div",null,"THIS SECTION HAS BEEN DISABLED")}}]),t}(n.Component),ya=Object(J.a)(Object(i.b)(null)(ga)),Ea=(a(760),function(e){function t(){var e,a;Object(b.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={size:50,windowWidth:0},a.updateWindowWidth=function(){a.setState({windowWidth:window.innerWidth})},a.handleStateChange=function(e){a.setState({size:a.state.size+5}),a.props.dispatch({type:"SIDEMENU_SET_STATE",payload:e.isOpen})},a}return Object(E.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.updateWindowWidth(),window.addEventListener("resize",this.updateWindowWidth)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowWidth)}},{key:"render",value:function(){var e=this,t=this.state.windowWidth>675?"60%":"90%";return r.a.createElement(oa.slide,{isOpen:this.props.isOpen,customBurgerIcon:!1,right:!0,onStateChange:function(t){return e.handleStateChange(t)},width:t},r.a.createElement(ya,null))}}]),t}(n.Component)),va=Object(i.b)(function(e){return{isOpen:e.SideMenuReducer.isOpen}})(Ea),Sa=(a(761),function(e){function t(){return Object(b.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(E.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(Et,null),r.a.createElement(va,null),r.a.createElement(S.a,null,r.a.createElement(O.a,{exact:!0,path:"/",component:Ht}),r.a.createElement(O.a,{exact:!0,path:"/stories",component:Zt}),r.a.createElement(O.a,{exact:!0,path:"/about",component:Ot}),r.a.createElement(O.a,{exact:!0,path:"/admin",component:ra}),r.a.createElement(O.a,{exact:!0,path:"/explore/:level/:name/:id",component:Ue}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(762),a(763);l.a.render(r.a.createElement(i.a,{store:Object(c.d)(h,Object(c.a)(s.a))},r.a.createElement(Sa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[351,1,2]]]);
//# sourceMappingURL=main.e810ec3d.chunk.js.map