(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{193:function(e,t,a){},194:function(e,t,a){},196:function(e,t,a){},210:function(e,t,a){},236:function(e,t,a){},298:function(e,t,a){e.exports=a.p+"static/media/truthtree-logo.75b56fb9.png"},300:function(e){e.exports=[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]},305:function(e,t,a){e.exports=a(641)},314:function(e,t,a){},333:function(e,t,a){},42:function(e,t){e.exports={TRUTHTREE_URI:"https://truthtree.herokuapp.com"}},440:function(e,t,a){},445:function(e,t){},447:function(e,t){},614:function(e,t,a){},634:function(e,t,a){},635:function(e,t,a){},636:function(e,t,a){},640:function(e,t,a){},641:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(23),l=a.n(o),i=a(26),c=a(76),s=a(276),u=a(41),d={value:"",loading:!1,suggestions:[]},m=Object(c.c)({FilterByReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dimension:"State"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_DIMENSION":return Object(u.a)({},e,{dimension:t.value});default:return e}},AttributeRangeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{attributeName:["Population"],populationRange:[-25,25]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RANGE_SELECTION":return Object(u.a)({},e,{populationRange:t.populationRange});default:return e}},SelectedAttributeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sidebarData:[],selectedAttributes:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_ATTRIBUTE":return Object(u.a)({},e,{selectedAttributes:Array.from(t.value)});default:return e}},YearSelectorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{yearSelected:2016},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_YEAR":e=Object(u.a)({},e,{yearSelected:t.yearSelected});break;default:return e}return e},LocationSearchBoxReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCHBOX_UPDATE_VALUE":return Object(u.a)({},e,{value:t.payload,suggestions:""===t.payload?[]:e.suggestions});case"SEARCHBOX_UPDATE_SUGGESTIONS":return Object(u.a)({},e,{suggestions:""===e.value?[]:t.payload});case"SEARCHBOX_FINISH_LOADING":return Object(u.a)({},e,{loading:!1});default:return e}},NormalizationReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_NORMALIZATION":e=Object(u.a)({},e,{selectedNormalizationName:t.selectedNormalizationName,selectedNormalizationDisplayName:t.selectedNormalizationDisplayName});break;default:return e}return e}});for(var p=a(11),h=a(12),b=a(14),f=a(13),y=a(15),g=a(673),v=a(675),E=a(670),O=a(654),j=a(647),N=a(648),k=(a(314),a(652)),S=a(657),T=a(653),C=a(27),x=a(37),R=a.n(x),A=a(21),L=a.n(A),w=(a(333),a(42)),I=a(277),z=a.n(I),D=a(176),_=a.n(D),U=(a(193),a(643)),B=a(644),P=a(645),F=a(646),M=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={dropdownOpen:!1,selectedNormalizationDisplayName:"Gross",selectedNormalizationName:"GROSS",normalizationValues:[]},a.normalizationValuesCall=a.normalizationValuesCall.bind(Object(C.a)(a)),a.toggle=a.toggle.bind(Object(C.a)(a)),a.setSelectedNormalization=a.setSelectedNormalization.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.normalizationValuesCall()}},{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"setSelectedNormalization",value:function(e){this.props.dispatch({type:"CHANGE_NORMALIZATION",selectedNormalizationName:e.target.id,selectedNormalizationDisplayName:e.target.value})}},{key:"normalizationValuesCall",value:function(){var e=this;R.a.get("".concat(w.TRUTHTREE_URI,"/api/normalization_types")).then(function(t){e.setState({normalizationValues:t.data})}).catch(function(e){console.log(e)})}},{key:"render",value:function(){var e=this,t=this.state.normalizationValues.map(function(t,a){return r.a.createElement(U.a,{key:a,id:t.name,value:t.displayValue,onClick:e.setSelectedNormalization},t.displayValue)});return r.a.createElement("div",{id:"normalisation"},"Normalization attribute:",r.a.createElement(B.a,{id:"dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(P.a,{caret:!0}," ",this.props.selectedNormalizationDisplayName," "),r.a.createElement(F.a,null,t)))}}]),t}(n.Component),V=Object(i.b)(function(e){return{selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName,selectedNormalizationDisplayName:e.NormalizationReducer.selectedNormalizationDisplayName}},function(e){return{dispatch:e}})(M),H=a(59),G=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={currentPopulation:0,currentLevel:null,data:{},selectedData:{},locationIds:[],selectedAttributes:[],year:2016,selectedNormalizationName:"GROSS",populationRange:[-25,25]},a.populationRangeCall=a.populationRangeCall.bind(Object(C.a)(a)),a.getFormattedName=a.getFormattedName.bind(Object(C.a)(a)),a.attributeCall=a.attributeCall.bind(Object(C.a)(a)),a.colFormatter=a.colFormatter.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({selectedAttributes:e.selectedAttributes,year:e.year,selectedNormalizationName:e.selectedNormalizationName,populationRange:e.populationRange,normalizationKeys:e.normalizationKeys});var a=L.a.pickBy(this.state.data,function(a){return a[1]<=t.state.currentPopulation+e.populationRange[1]/100*t.state.currentPopulation&&a[1]>=t.state.currentPopulation+e.populationRange[0]/100*t.state.currentPopulation});this.setState({selectedData:a,locationIds:L.a.keys(a)});var n=L.a.flatMap(e.selectedAttributes,function(e){return e[0]});n.length>0&&this.attributeCall(L.a.keys(a),n,e)}},{key:"attributeCall",value:function(e,t,a){var n=this,r=a.year?a.year:2016;R.a.get("/api/attributes?locationIds="+e+"&attributeIds="+t+"&normalizationType="+a.selectedNormalizationName+"&yearList="+r).then(function(e){var t=n.state.selectedData;L.a.map(e.data,function(e){L.a.map(e.attributes,function(n){t[e.location_id][n.attribute_id]="PER_CAPITA"===a.selectedNormalizationName?n.data[0].per_capita:"BY_REVENUE"===a.selectedNormalizationName?n.data[0].by_revenue:n.data[0].value})}),n.setState({selectedData:t})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.setState({data:{},selectedAttributes:this.props.selectedAttributes,year:this.props.yearSelected,selectedNormalizationName:this.props.selectedNormalizationName,populationRange:this.props.populationRange}),this.populationRangeCall()}},{key:"getFormattedName",value:function(e){return e.toLowerCase()===this.props.location.replace(/-/g," ")?r.a.createElement("b",null,L.a.capitalize(e)):L.a.capitalize(e)}},{key:"populationRangeCall",value:function(){var e=this,t=0,a=0,n={},r=0,o=this.state.year?this.state.year:2016;R.a.get("".concat(w.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+o).then(function(o){return(r=o.data.population)||Object(H.confirmAlert)({title:"Oops!",message:"The location you have selected does not seem to have data. Please go back and chose another location.",buttons:[{label:"OK"}]}),e.setState({currentPopulation:r}),a=Math.floor(r+.5*r),t=Math.floor(r-.5*r),R.a.get("".concat(w.TRUTHTREE_URI,"/api/").concat(e.props.level,"?populationRange=")+t+","+a).then(function(t){L.a.map(t.data,function(e){n[e.id]={name:e.name,1:e.population}}),e.setState({data:n});var a=L.a.pickBy(e.state.data,function(t){return t[1]<=r+e.state.populationRange[1]/100*r&&t[1]>=r+e.state.populationRange[0]/100*r});if(e.setState({selectedData:a}),e.setState({locationIds:L.a.keys(a)}),e.props.selectedAttributes){var o=L.a.flatMap(e.props.selectedAttributes,function(e){return e[0]});e.attributeCall(L.a.keys(a),o,e.state)}}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"colFormatter",value:function(e,t){var a="https://www.google.com/search?q="+t[0]+"+"+this.state.selectedAttributes[0][2]+" "+this.state.selectedAttributes[0][1];return r.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},e.toLocaleString())}},{key:"render",value:function(){var e=this,t=[{dataField:"0",text:"Name",formatter:this.getFormattedName},{dataField:"1",text:"Population",sort:!0}];this.state.selectedAttributes.map(function(a,n){t.push({dataField:(n+2).toString(),text:a[1],sort:!0,formatter:e.colFormatter})});var a=[];L.a.values(this.state.selectedData).map(function(t){var n={};n[0]=L.a.capitalize(t.name),n[1]=t[1].toLocaleString(),e.state.selectedAttributes.map(function(e,a){var r=t[e[0]]?t[e[0]]:"-";n[(a+2).toString()]=r}),a.push(n)});var n=D.CSVExport.ExportCSVButton;return r.a.createElement("div",{id:"mainDisplay"},r.a.createElement(V,null),r.a.createElement(_.a,{keyField:"0",data:a,columns:t,exportCSV:!0},function(e){return r.a.createElement("div",null,r.a.createElement(n,Object.assign({className:"btn btn-secondary"},e.csvProps),"Export as Csv"),r.a.createElement("hr",null),r.a.createElement(z.a,Object.assign({hover:!0,striped:!0},e.baseProps)))}))}}]),t}(n.Component),W=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalizationName:e.NormalizationReducer.selectedNormalizationName}})(G),Y=a(127),K=(a(194),a(674)),q=(a(195),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).isAttributeSelected=function(e){for(var t=0;t<a.props.selectedAttributes.length;t++)if(a.props.selectedAttributes[t][0]===e)return!0;return!1},a.handleClickCollection=function(e){a.setState(Object(Y.a)({},e,!a.state[e]))},a.handleChangeSearch=function(e){var t=e.target.value.toLowerCase();t=(t=t.replace("\\","")).replace("*",""),a.setState({searchedString:t})},a.renderSearchTerm=function(e){if(""===a.state.searchedString||a.state.sidebarData[e].name.toLowerCase().search(a.state.searchedString)>-1)return!0;var t;for(t in a.state.sidebarData[e].attributes)if(a.state.sidebarData[e].attributes[t].name.toLowerCase().search(a.state.searchedString)>-1)return!0;return!1},a.state={sidebarData:[],isLoaded:!1,selectedAttributes:[],collapsedLeft:!1,searchedString:""},Object.keys(a.state.sidebarData).map(function(e){return a.state[e]=!1}),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;R.a.get("".concat(w.TRUTHTREE_URI,"/api/collections?locationId=")+this.props.match.params.id).then(function(t){e.setState({sidebarData:t.data,isLoaded:!0})}).catch(function(e){console.log(e)})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"handleClickAttribute",value:function(e,t){for(var a=this,n=this.props.selectedAttributes,r=t.attribute_id,o=function(e){if(n[e][0]===r)return L.a.remove(n,function(t){return t===n[e]}),a.setState({selectedAttributes:n}),a.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n}),{v:void 0}},l=0;l<n.length;l++){var i=o(l);if("object"===typeof i)return i.v}n.length<10?(n.push([r,t.name,e]),this.setState({selectedAttributes:n}),this.props.dispatch({type:"CHANGE_ATTRIBUTE",value:n})):Object(H.confirmAlert)({title:"Error!",message:"Number of selected attributes exceeded limit of 10, please remove attributes to add more.",buttons:[{label:"OK"}]})}},{key:"collapseLeftBar",value:function(){this.setState({collapsedLeft:!this.state.collapsedLeft}),this.setState({searchedString:""})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?this.state.collapsedLeft?r.a.createElement("button",{className:"LeftSideBarButton",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{style:{color:"white"},className:"fa fa-chevron-right"})):r.a.createElement("nav",{className:"scrollLeftBar col-md-2 d-none d-md-block bg-dark sidebar"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-10"},r.a.createElement("input",{className:"form-control leftSearch","data-spy":"affix","data-offset-top":"197",id:"attribute-search-box",onChange:this.handleChangeSearch,placeholder:"Search Attributes"})),r.a.createElement("button",{className:"btn",onClick:function(){return e.collapseLeftBar()}},r.a.createElement("i",{className:"fa fa-chevron-left"}))),r.a.createElement("div",{style:{display:this.state.collapsedLeft?"none":"block"}},Object.keys(this.state.sidebarData).map(function(t,a){if(e.renderSearchTerm(t))return r.a.createElement("div",{key:a},r.a.createElement("button",{className:"accordion",onClick:function(){return e.handleClickCollection(t)}},e.state.sidebarData[t].name),r.a.createElement("div",{style:{display:e.state[t]?"block":"none"}},Object.keys(e.state.sidebarData[t].attributes).map(function(a,n){return r.a.createElement("label",{onClick:function(){return e.handleClickAttribute(e.state.sidebarData[t].name,e.state.sidebarData[t].attributes[a])},key:n,className:"panel float-right attributes",style:{background:e.isAttributeSelected(e.state.sidebarData[t].attributes[a].attribute_id)?"#bfd9d5":"white"}},r.a.createElement("div",null,e.state.sidebarData[t].attributes[a].name))})))}))):r.a.createElement("div",null,"Loading...")}}]),t}(n.Component)),Z=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}},function(e){return{dispatch:e}})(Object(K.a)(q)),X={height:"200px",overflow:"auto"},J=[],$=1966;$<2016;$++)J.push($+1);var Q=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).toggle=a.toggle.bind(Object(C.a)(a)),a.state={dropdownOpen:!1,yearSelected:"2016"},a.onClick=a.onClick.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"toggle",value:function(){this.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})}},{key:"onClick",value:function(e){this.props.dispatch({type:"CHANGE_YEAR",yearSelected:e.target.id})}},{key:"render",value:function(){var e=this,t=J.map(function(t,a){return r.a.createElement(U.a,{key:a,id:t,onClick:e.onClick},t)});return r.a.createElement("div",null,r.a.createElement("p",null," Select Year of Data to be displayed: "),r.a.createElement(B.a,{isOpen:this.state.dropdownOpen,toggle:this.toggle},r.a.createElement(P.a,{caret:!0},this.props.yearSelected),r.a.createElement(F.a,{style:X},t)))}}]),t}(n.Component),ee=Object(i.b)(function(e){return{yearSelected:e.YearSelectorReducer.yearSelected}},function(e){return{dispatch:e}})(Q),te=(a(196),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={selectedAttributes:[]},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({selectedAttribtes:this.props.selectedAttributes})}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes})}},{key:"deselectAttribute",value:function(e){for(var t=this,a=this.state.selectedAttributes,n=e[0],r=function(e){if(a[e][0]===n)return L.a.remove(a,function(t){return t===a[e]}),t.setState({selectedAttributes:a}),t.props.dispatch({type:"CHANGE_ATTRIBUTE",value:a}),{v:void 0}},o=0;o<a.length;o++){var l=r(o);if("object"===typeof l)return l.v}}},{key:"render",value:function(){var e=this;return this.state.selectedAttributes.length<1?r.a.createElement(j.a,null,r.a.createElement(N.a,{xs:"auto",className:"filters"},"Selected Attributes: None")):r.a.createElement(j.a,null,r.a.createElement(N.a,{xs:"auto",className:"filters"},"Selected Attributes:"),r.a.createElement(N.a,null,Object.keys(this.state.selectedAttributes).map(function(t,a){return r.a.createElement("button",{className:"btn btn-light selected-attribute-button",onClick:function(){return e.deselectAttribute(e.state.selectedAttributes[a])}},r.a.createElement("i",{className:"fa fa-times",style:{paddingRight:"10px"}}),e.state.selectedAttributes[a][2],"-",e.state.selectedAttributes[a][1])})))}}]),t}(n.Component)),ae=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(te),ne=a(303),re=(a(438),a(439),a(440),ne.a.Range),oe={"-50":"-50%","-40":"-40%","-30":"-30%","-20":"-20%","-10":"-10%",0:"0%",10:"10%",20:"+20%",30:"+30%",40:"+40%",50:"+50%"},le=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).onSliderChange=function(e){console.log(),a.props.dispatch({type:"RANGE_SELECTION",populationRange:e})},a.state={locationPopulation:null,value:[-5,5],min:-50,max:50},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.yearSelected?this.props.yearSelected:2016,a="".concat(w.TRUTHTREE_URI,"/api/population?locationId=")+this.props.locationId+"&year="+t,n=null;R.a.get(a).then(function(t){n=t.data.population,e.setState({locationPopulation:n})}).catch(function(e){return console.log(e)})}},{key:"render",value:function(){var e=this,t=this.props.attribute.attributeName.map(function(t,a){return r.a.createElement("div",{className:"outer",key:a},r.a.createElement("p",null,t," of ",e.props.location," ",":  "," ",r.a.createElement("b",null,e.state.locationPopulation)),r.a.createElement("p",{className:"no-margin"},"Select range of ",t," for filtering other"," ",e.props.level,":"," ",r.a.createElement("b",null,e.props.attribute.populationRange[0],"% to"," ",e.props.attribute.populationRange[1],"%")),r.a.createElement("p",{className:"Note"},"(*range selection available from -50% to +50% wrt to"," ",e.props.location," ",t,")"),r.a.createElement(re,{dots:!0,step:5,value:e.props.attribute.populationRange,min:e.state.min,max:e.state.max,marks:oe,onChange:e.onSliderChange}))});return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null," ",t," ")))}}]),t}(n.Component),ie=Object(i.b)(function(e){return{year:e.YearSelectorReducer.yearSelected,attribute:e.AttributeRangeReducer}},function(e){return{dispatch:e}})(le),ce=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).onClick=function(){var e=a.props,t=e.label;(0,e.onClick)(t)},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.onClick,t=this.props,a=t.activeTab,n=t.label,o="tab-list-item";return a===n&&(o+=" tab-list-active"),r.a.createElement("li",{className:o,onClick:e},n)}}]),t}(n.Component),se=(a(210),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).onClickTabItem=function(e){a.setState({activeTab:e})},a.state={activeTab:a.props.children[0].props.label},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.onClickTabItem,t=this.props.children,a=this.state.activeTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},t.map(function(t){var n=t.props.label;return r.a.createElement(ce,{activeTab:a,key:n,label:n,onClick:e})})),r.a.createElement("div",{className:"tab-content"},t.map(function(e){if(e.props.label===a)return e.props.children})))}}]),t}(n.Component)),ue=a(279),de=a(649),me=a(672),pe=a(655),he=a(656),be=a(178),fe=a.n(be),ye=a(285),ge=a.n(ye),ve=a(651),Ee=a(671),Oe=a(650),je=a(295),Ne=a(296),ke=a(138),Se=a(107),Te=a(304),Ce=(a(236),function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.attributeName;return"large"===this.props.condition?r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(de.a,{color:"info",className:"popupHeader"},this.props.collectionName," - ",this.props.attributeName)),r.a.createElement(Ee.a,{width:1050,height:450,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(Oe.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(je.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(Ne.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(ke.a,null),r.a.createElement(Se.a,{verticalAlign:"bottom",iconSize:10}),this.props.locations.map(function(e,t){return r.a.createElement(Te.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})}))):r.a.createElement("div",{className:"chartDiv"},r.a.createElement("div",{style:{padding:"10px"}},r.a.createElement(de.a,{color:"info"}," ",this.props.collectionName," - ",this.props.attributeName," ")),r.a.createElement(Ee.a,{width:495,height:200,data:this.props.data,margin:{top:5,right:5,bottom:5,left:5}},r.a.createElement(Oe.a,{className:"chartDiv",stroke:"#ccc",strokeDasharray:"5 5",padding:{left:20,right:20}}),r.a.createElement(je.a,{dataKey:"year",label:{value:"Year",position:"insideBottom"}}),r.a.createElement(Ne.a,{label:{value:e,angle:-90,position:"insideLeft"}}),r.a.createElement(ke.a,null),this.props.locations.map(function(e,t){return r.a.createElement(Te.a,{key:e.name,type:"monotone",dataKey:e.name,stroke:e.color,isAnimationActive:!1})})))}}]),t}(n.Component)),xe=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).state={loading:!0,locations:[],data:[],locationData:[],currentLevel:null,dataReal:[],locationIds:[],lineColors:["red","purple","green","blue","deeppink","orange","navy","slategray","lime","indianred","dimgrey"],populationRange:[-25,25]},a.fetchResponse=a.fetchResponse.bind(Object(C.a)(a)),a.formatResponse=a.formatResponse.bind(Object(C.a)(a)),a.initializeYearMap=a.initializeYearMap.bind(Object(C.a)(a)),a.fetchLocations=a.fetchLocations.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"componentWillReceiveProps",value:function(e){this.setState({selectedAttributes:e.selectedAttributes}),0!==this.props.selectedAttributes.length&&this.fetchLocations()}},{key:"fetchLocations",value:function(){var e=this,t=0,a=0,n=this.props.yearSelected?this.props.yearSelected:2016,r={},o=0;R.a.get("".concat(w.TRUTHTREE_URI,"/api/population?locationId=")+this.props.id+"&year="+n).then(function(n){return o=n.data.population,e.setState({currentPopulation:o}),a=Math.floor(o+.5*o),t=Math.floor(o-.5*o),R.a.get("".concat(w.TRUTHTREE_URI,"/api/").concat(e.props.level,"?populationRange=")+t+","+a).then(function(t){L.a.map(t.data,function(e){r[e.id]={name:e.name,1:e.population}}),e.setState({locationData:r});var a=L.a.pickBy(r,function(t){return t[1]<=o+e.props.populationRange[1]/100*o&&t[1]>=o+e.props.populationRange[0]/100*o});e.setState({locationIds:L.a.map(L.a.keys(a),L.a.toInteger)}),e.setState({locationData:r}),e.props.updateLocation(r,e.state.locationIds),e.fetchResponse()}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"fetchResponse",value:function(){var e=this,t="".concat(w.TRUTHTREE_URI,"/api/attributes?locationIds=")+this.state.locationIds+"&attributeIds="+this.props.selectedAttributes[this.props.index][0]+"&normalizationType="+this.props.selectedNormalization;R.a.get(t).then(function(t){console.log(t),e.formatResponse(t)}).catch(function(e){console.log(e)})}},{key:"formatResponse",value:function(e){var t=this,a=[],n=[],r={};e.data.map(function(e){var a={},o=t.state.locationData[e.location_id].name;return e.attributes.map(function(l){if(l.data.map(function(a){var n=r[l.attribute_id];void 0===n&&(n=t.initializeYearMap());var i=n[a.year-1967];return 0!==i[e.location_id]&&void 0!==i[e.location_id]||("GROSS"===t.props.selectedNormalization?n[a.year-1967][o]=a.value:"PER_CAPITA"===t.props.selectedNormalization?n[a.year-1967][o]=a.per_capita:"BY_REVENUE"===t.props.selectedNormalization&&(n[a.year-1967][o]=a.by_revenue)),r[l.attribute_id]=n,null}),t.props.userSelectedLocations.includes(e.location_id)){a.id=e.location_id;var i=t.state.lineColors[n.length-1];a.color=i,a.name=o,n.push(a)}return null}),null}),a.push(r),this.setState({data:a,locations:n,loading:!1})}},{key:"initializeYearMap",value:function(){for(var e=[],t=1967;t<2017;t++){var a={year:t};e.push(a)}return e}},{key:"render",value:function(){var e=this,t=this.props.selectedAttributes.length,a=this.state.loading;return 0===t?r.a.createElement("div",null,"Select an attribute"):a?r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(ve.a,{className:"align-self-center",color:"secondary",size:"sm"})):this.state.data.map(function(t,a){return r.a.createElement(Ce,{data:t[e.props.selectedAttributes[e.props.index][a]],attributeName:e.props.selectedAttributes[e.props.index][1],collectionName:e.props.selectedAttributes[e.props.index][2],locations:e.state.locations,condition:e.props.condition})})}}]),t}(n.Component),Re=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes,year:e.YearSelectorReducer.yearSelected,populationRange:e.AttributeRangeReducer.populationRange,selectedNormalization:e.NormalizationReducer.selectedNormalizationName}})(xe),Ae=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).ImageCapture=function(){var e=a.refs.image,t=a.attrId;console.log(t),fe.a.toJpeg(e,{quality:1}).then(function(e){var t=document.createElement("a");t.download="TruthTree.jpeg",t.href=e,t.click()}).catch(function(e){console.error("oops, something went wrong!",e)})},a.downloadAsZip=function(){var e=0,t=new ge.a,n=a.state.imageRefs,r=Object.values(n);Object.keys(n).map(function(a){var o=n[a];fe.a.toJpeg(o,{quality:1}).then(function(n){var o=t.folder("images"),l=n.split(",")[1];o.file(a+".jpeg",l,{base64:!0}),++e===r.length&&t.generateAsync({type:"blob"}).then(function(e){var t=document.createElement("a");t.download="TruthTree.zip",t.href=URL.createObjectURL(e),t.click()})}).catch(function(e){console.error("Error downloading zip",e)})})},a.handExpandClick=function(e){return a.setState({modal:!0,modalAttrIndex:e})},a.state={modal:!1,locations:{},locationIds:[],userSelectedLocations:[],imageUrls:[],imageRefs:{}},a.modalToggle=a.modalToggle.bind(Object(C.a)(a)),a.updateLocation=a.updateLocation.bind(Object(C.a)(a)),a.renderLocationList=a.renderLocationList.bind(Object(C.a)(a)),a.selectLocations=a.selectLocations.bind(Object(C.a)(a)),a.ImageCapture=a.ImageCapture.bind(Object(C.a)(a)),a.downloadAsZip=a.downloadAsZip.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"modalToggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"modalToggle",value:function(){this.setState(function(e){return{modal:!e.modal}})}},{key:"getAttributeNames",value:function(e){return L.a.flatMap(this.props.selectedAttributes,function(t){return"name"===e?t[1]:t[0]})}},{key:"updateLocation",value:function(e,t){var a=this.state.userSelectedLocations;0===a.length&&(a=t.length>10?t.slice(0,10):t),this.setState({locations:e,locationIds:t,userSelectedLocations:a})}},{key:"selectLocations",value:function(e){var t=Object.assign([],this.state.userSelectedLocations),a=parseInt(e.target.value);t.includes(a)?(t=t.filter(function(e){return e!==a}),this.setState({userSelectedLocations:t})):t.length<10?(t.push(a),this.setState({userSelectedLocations:t})):Object(H.confirmAlert)({title:"Error!",message:"Number of selected locations exceeded limit of 10, please remove existing location to add more.",buttons:[{label:"OK"}]})}},{key:"renderLocationList",value:function(){var e=this,t=this.state.locationIds.map(function(t){return r.a.createElement(N.a,{sm:"3",className:"form-check checkbox checkbox-circle checkbox-yellow"},r.a.createElement("input",{className:"form-check-input",type:"checkbox",value:t,id:"checkbox-input",checked:e.state.userSelectedLocations.includes(t),onClick:e.selectLocations}),r.a.createElement("label",{className:"form-check-label",htmlFor:"checkbox-input"},e.state.locations[t].name))});return r.a.createElement(j.a,{className:"location-list-padding"},t)}},{key:"render",value:function(){var e=this,t=this.getAttributeNames("name"),a=t.length,n=t.map(function(t,a){return r.a.createElement("div",{ref:function(a){void 0===e.state.imageRefs[t]&&(e.state.imageRefs[t]=a)}},r.a.createElement(k.a,{key:a,id:"cards"},r.a.createElement(T.a,{className:"time-series-card"},r.a.createElement(Re,{index:a,condition:"tiny",id:e.props.id,level:e.props.level,updateLocation:e.updateLocation,userSelectedLocations:e.state.userSelectedLocations,generateUrl:e.generateUrl}),r.a.createElement(ue.a,{className:"button",color:"secondary",onClick:function(){return e.handExpandClick(a)}},r.a.createElement(de.a,null,"Expand")))))});return 0===a?r.a.createElement(O.a,{className:"alert"}," ","Please select minimum of one attribute"," "):r.a.createElement(O.a,{className:"GridContainer"},r.a.createElement(j.a,null,r.a.createElement(k.a,null,r.a.createElement(T.a,null,r.a.createElement(j.a,null,r.a.createElement(V,null)),r.a.createElement("hr",null),r.a.createElement(j.a,{className:"SelectedLocations"},r.a.createElement("i",null,"Select locations from the selected range to be plotted in the graph:"," "),this.renderLocationList())))),r.a.createElement(j.a,null," ",r.a.createElement("div",{className:"Space"})),r.a.createElement(j.a,null,r.a.createElement(ue.a,{color:"secondary",onClick:this.downloadAsZip},r.a.createElement("i",{className:"fa fa-download icon-padding"}),"Download All")),r.a.createElement(j.a,null," ",r.a.createElement("div",{className:"Space"})),r.a.createElement(j.a,null,n,r.a.createElement(me.a,{isOpen:this.state.modal,toggle:this.modalToggle,className:"GridModal"},r.a.createElement("div",{ref:"image"},r.a.createElement(pe.a,{className:"backgroundWhite"},r.a.createElement(Re,{index:this.state.modalAttrIndex,condition:"large",id:this.props.id,updateLocation:this.updateLocation,userSelectedLocations:this.state.userSelectedLocations,level:this.props.level}))),r.a.createElement(he.a,null,r.a.createElement(ue.a,{color:"secondary",onClick:this.ImageCapture},"Download"),r.a.createElement(ue.a,{color:"secondary",onClick:this.modalToggle},"Cancel")))))}}]),t}(n.Component),Le=Object(i.b)(function(e){return{selectedAttributes:e.SelectedAttributeReducer.selectedAttributes}})(Ae),we=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).handleChangeAuthor=function(e){var t=e.target.value.toLowerCase();t=(t=t.replace("\\","")).replace("*",""),a.setState({authorField:t})},a.handleChangeTitle=function(e){var t=e.target.value.toLowerCase();t=(t=t.replace("\\","")).replace("*",""),a.setState({titleField:t})},a.handleChangeTags=function(e){console.log(a.state.tagsField);var t=e.target.value.toLowerCase();if(t=(t=t.replace("\\","")).replace("*",""),L.a.endsWith(t," ")){var n=a.state.tagsField;n.push(t),a.setState({selectedAttributes:n}),console.log(a.state.tagsField)}},a.handleChangeStory=function(e){var t=e.target.value.toLowerCase();t=(t=t.replace("\\","")).replace("*",""),a.setState({storyField:t})},a.state={isLoaded:!1,selectedAttributes:[],authorField:"",titleField:"",tagsInputValue:"",tagsField:[],storyField:"",storyMaxLength:1e3},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoaded:!0})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"submitForm",value:function(){this.state.storyField.length>this.state.storyMaxLength?Object(H.confirmAlert)({title:"Error!",message:"Story text is too long.",buttons:[{label:"OK"}]}):this.state.titleField.length<1&&Object(H.confirmAlert)({title:"Error!",message:"Please enter a story title.",buttons:[{label:"OK"}]})}},{key:"render",value:function(){var e=this;return this.state.isLoaded?r.a.createElement("div",null,r.a.createElement("p",null,"Tell us what you found!"),r.a.createElement("input",{className:"form-control","data-spy":"affix","data-offset-top":"197",onChange:this.handleChangeAuthor,placeholder:"Author Name"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control","data-spy":"affix","data-offset-top":"197",onChange:this.handleChangeTitle,placeholder:"Story Title"}),r.a.createElement("br",null),r.a.createElement("input",{className:"form-control","data-spy":"affix","data-offset-top":"197",placeholder:"Tags"}),r.a.createElement(j.a,null,r.a.createElement(N.a,{xs:"auto",className:"filters"},"Selected Tags:"),r.a.createElement(N.a,null,Object.keys(this.state.tagsField).map(function(t,a){return r.a.createElement("button",{className:"btn btn-light selected-attribute-button"},r.a.createElement("i",{className:"fa fa-times",style:{paddingRight:"10px"}}),e.state.tagsField[a][2],"-",e.state.tagsField[a][1])}))),r.a.createElement("br",null),r.a.createElement("textarea",{className:"form-control",rows:"5","data-spy":"affix","data-offset-top":"197",onChange:this.handleChangeStory,placeholder:"Story"}),"Story length: ",this.state.storyField.length," /",this.state.storyMaxLength,r.a.createElement("br",null),r.a.createElement("button",{className:"btn btn-light selected-attribute-button",onClick:function(){return e.submitForm()}},r.a.createElement("i",{className:"fa"}),"SUBMIT STORY")):r.a.createElement("div",null,"THIS SECTION HAS BEEN DISABLED")}}]),t}(n.Component),Ie=Object(i.b)(function(e){return{}},function(e){return{dispatch:e}})(Object(K.a)(we)),ze={paddingTop:75},De=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{fluid:!0,style:ze,className:"home"},r.a.createElement(j.a,null,r.a.createElement(Z,null),r.a.createElement("div",{className:"col-12 col-md-10 align-items-center padding"},r.a.createElement(k.a,{className:"selected-attributes padding"},r.a.createElement(ae,null)),r.a.createElement(k.a,{className:"right-panel"},r.a.createElement(se,null,r.a.createElement("div",{label:"Table View"},r.a.createElement(W,{level:this.props.match.params.level,id:this.props.match.params.id,location:this.props.match.params.name})),r.a.createElement("div",{label:"Time Series View"},r.a.createElement(Le,{id:this.props.match.params.id,level:this.props.match.params.level})),r.a.createElement("div",{label:"Create a Story"},r.a.createElement(Ie,null)))),r.a.createElement(k.a,{className:"bottom-panel"},r.a.createElement(S.a,{className:"bottom-panel-header"},r.a.createElement("div",null,"Selected Location: ",r.a.createElement("b",null,this.props.match.params.name))),r.a.createElement(T.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{className:"border-right"},r.a.createElement(ie,{level:this.props.match.params.level,location:this.props.match.params.name,locationId:this.props.match.params.id})),r.a.createElement(N.a,{sm:"2",xs:"2"},r.a.createElement(ee,null))))))))}}]),t}(n.Component),_e=a(660),Ue=a(661),Be=a(662),Pe=a(663),Fe=a(664),Me=a(665),Ve=a(666),He=a(658),Ge=a(4),We=a.n(Ge),Ye=a(659),Ke=a(297),qe=a.n(Ke),Ze=a(173),Xe=a.n(Ze),Je=function(e){return{type:"SEARCHBOX_UPDATE_VALUE",payload:e}},$e=function(e){return{type:"SEARCHBOX_UPDATE_SUGGESTIONS",payload:e}},Qe={0:"states",1:"counties",2:"cities"},et=function(e){var t=e.name,a=e.parent;return t+=a?a.parent?", ".concat(a.name,", ").concat(a.parent.name):", ".concat(a.name):""},tt=function(e){return"/explore/".concat(Qe[e.typeCode],"/").concat(e.name.toLowerCase().replace(" ","-"),"/").concat(e.id)},at="/api/search",nt=function(e){var t=e.containerProps,a=e.children;return r.a.createElement("div",Object.assign({style:{height:"5em"}},t),a)},rt=function(e){return r.a.createElement(He.a,{className:"text-secondary",to:tt(e)},et(e))},ot=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).storeInputRef=function(e){null!==e&&(a.input=e.input)},a.handleInputChange=function(e,t){var n=t.newValue;a.props.dispatch(Je(n))},a.handleSuggestionsFetchRequested=function(e){var t=e.value;Object(x.post)(at,{text:t}).then(function(e){return a.props.dispatch($e(e.data))}).catch(function(e){return console.log(e)})},a.renderInputComponent=function(e){return r.a.createElement("div",null,r.a.createElement(Ye.a,Object.assign({},e,{id:"location-search-box",name:"location-search-box",placeholder:"Try something like Seattle or Boston",innerRef:function(e){a.inputRef=e}})))},a.state={suggestions:[]},a.debouncedhandleSuggestionsFetchRequested=Xe()(a.handleSuggestionsFetchRequested,250),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.value!==e.value&&this.inputRef.focus()}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.suggestions,n=e.dispatch,o={value:t,onChange:this.handleInputChange};return r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,null,r.a.createElement(qe.a,{ref:this.storeInputRef,theme:{container:"position-relative",suggestionsList:"list-group position-absolute w-100 overflow-y",suggestion:"list-group-item"},suggestions:a,onSuggestionsFetchRequested:this.debouncedhandleSuggestionsFetchRequested,onSuggestionSelected:function(){return n(Je(t))},getSuggestionValue:et,renderInputComponent:this.renderInputComponent,renderSuggestionsContainer:nt,renderSuggestion:rt,inputProps:o}))))}}]),t}(n.Component),lt=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,suggestions:e.LocationSearchBoxReducer.suggestions,loading:e.LocationSearchBoxReducer.loading}})(Object(K.a)(ot)),it=a(298),ct=a.n(it),st={backgroundColor:"rgba(13, 22, 38, 0.8)"},ut={"&:hover":{textDecoration:"none"}},dt={width:50},mt=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={collapseOpen:!1},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchPhrase,a=We()({"justify-content-center":!0,"d-none":""===t});return r.a.createElement(_e.a,{style:st,expand:"md",className:"fixed-top"},r.a.createElement(Ue.a,{className:"text-primary",style:ut},r.a.createElement(He.a,{to:"/"},r.a.createElement("img",{src:ct.a,style:dt,className:"d-inline-block",alt:"TruthTree logo"})),"\xa0TruthTree"),r.a.createElement(Be.a,{onClick:function(){return e.setState({collapseOpen:!e.state.collapseOpen})}}),r.a.createElement(Pe.a,{isOpen:this.state.collapseOpen,navbar:!0},r.a.createElement(O.a,null,r.a.createElement(j.a,{className:a},r.a.createElement(N.a,{md:10,lg:7},r.a.createElement(lt,null)))),r.a.createElement(Fe.a,{className:"ml-auto",navbar:!0},r.a.createElement(Me.a,null,r.a.createElement(Ve.a,{tag:He.a,to:"/"},"Explore")),r.a.createElement(Me.a,null,r.a.createElement(Ve.a,{tag:He.a,to:"/stories"},"Stories")),r.a.createElement(Me.a,null,r.a.createElement(Ve.a,{tag:He.a,to:"/about"},"About")))))}}]),t}(n.Component),pt=Object(K.a)(Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(mt)),ht=a(667),bt=(a(614),{paddingTop:70}),ft=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{fluid:!0,style:bt,className:"about"},r.a.createElement(ht.a,{className:"float-center"},r.a.createElement("h1",{className:"text-primary"},"TruthTree"),r.a.createElement("p",null,"A Public Data Vizipedia/Wiki-Laboratory"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",{className:"lead"},"TruthTree seeks to unite all the public data in the world into a data-visualization tool and reference platform that can facilitate data-driven understanding and consensus regarding geography, politics, and culture for geographical entities at all scales."),r.a.createElement("p",{className:"lead"})))}}]),t}(n.Component),yt=a(299),gt=a.n(yt),vt=a(52),Et=a.n(vt),Ot=a(300),jt={height:"100%",width:"100%"},Nt=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={center:{lat:37.09024,lng:-95.712891},zoom:5,markers:[]},a.renderMarkers=function(e){if(a.map&&a.maps){a.setMarkersMap(a.state.markers,null);var t=e.map(function(e){var t=new a.maps.Marker({position:{lat:e.latitude,lng:e.longitude},map:a.map,animation:a.maps.Animation.DROP}),n=new a.maps.InfoWindow({content:"\n            <div>\n              ".concat(et(e),"\n            </div>\n          "),maxWidth:200});return n.open(a.map,t),t.addListener("click",function(){n.open(a.map,t),a.props.history.push(tt(e))}),t.addListener("mouseover",function(){n.open(a.map,t)}),t});a.setState({markers:t})}},a.setMarkersMap=function(e,t){e.forEach(function(e){return e.setMap(t)})},a.handleApiLoaded=function(e,t){a.maps=t,a.map=e,e.setOptions({styles:Ot,fullscreenControlOptions:{position:t.ControlPosition.BOTTOM_RIGHT}}),a.renderMarkers(a.props.suggestions)},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"componentWillReceiveProps",value:function(e){Et()(this.props.suggestions,e.suggestions)||this.renderMarkers(e.suggestions)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:jt,className:"position-absolute"},r.a.createElement(gt.a,{bootstrapURLKeys:{key:"AIzaSyD6S0fXIE22l64bV3nhv-EB-7K1gh39nqs"},defaultCenter:this.state.center,defaultZoom:this.state.zoom,yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(t){var a=t.map,n=t.maps;return e.handleApiLoaded(a,n)}}))}}]),t}(n.Component),kt=Object(K.a)(Object(i.b)(function(e){return{suggestions:e.LocationSearchBoxReducer.suggestions}})(Nt)),St=a(668),Tt=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleInputChange=function(e){e.target.blur(),a.props.dispatch(Je(e.target.value))},a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props,t=e.value,a=e.loading;return r.a.createElement(O.a,null,r.a.createElement(j.a,{className:"py-3"},a?r.a.createElement(N.a,{className:"d-flex justify-content-center"},r.a.createElement(ve.a,{className:"align-self-center",color:"primary"})):r.a.createElement(N.a,null,r.a.createElement(St.a,{style:{cursor:"pointer",color:"white"},for:"dummy-search-box"},"Search for a U.S location:"),r.a.createElement(Ye.a,{id:"dummy-search-box",value:t,onChange:this.handleInputChange,placeholder:"Try something like Seattle or Boston"}))))}}]),t}(n.Component),Ct=Object(i.b)(function(e){return{value:e.LocationSearchBoxReducer.value,loading:e.LocationSearchBoxReducer.loading}})(Tt),xt=a(301),Rt=a.n(xt),At={color:"white"},Lt=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{style:At},r.a.createElement("h1",{className:"text-primary"},"Welcome to TruthTree"),r.a.createElement(Rt.a,{avgTypingDelay:20,cursor:{hideWhenDone:!0}},"We're an open source data visualization project that focuses on U.S government financial spending. \xa0",r.a.createElement(He.a,{to:"/about"},"Find out more")))))}}]),t}(n.Component),wt={marginBottom:"12em",backgroundColor:"rgba(13, 22, 38, 0.7)"},It=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.props.searchPhrase,t=We()({"d-none":""!==e});return r.a.createElement(O.a,{className:t},r.a.createElement(j.a,null,r.a.createElement(N.a,{style:wt,xs:12,sm:11,md:9,lg:6,className:"py-3 px-4"},r.a.createElement(Lt,null),r.a.createElement(Ct,null))))}}]),t}(n.Component),zt=Object(i.b)(function(e){return{searchPhrase:e.LocationSearchBoxReducer.value}})(It),Dt={flex:"1 1 100%"},_t=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:Dt,className:"d-flex align-items-center position-relative"},r.a.createElement(kt,null),r.a.createElement(zt,null))}}]),t}(n.Component),Ut=(a(634),function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,"Story details")}}]),t}(n.Component)),Bt=a(669),Pt=(a(635),[{title:"Title1",tags:["tag1","tag2"],body:"dummytext1",upvotes:2,downvotes:0},{title:"Title2",tags:["tag3","tag4","tag1","tag2"],body:"dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2dummytext2",upvotes:3,downvotes:1},{title:"Title3",tags:[],body:"dummytext3",upvotes:5,downvotes:2},{title:"Title4",tags:["cdscavsdzfvsdscscccccc","vdszcsazsedczxesczxcsaz"],body:"dummytext4",upvotes:0,downvotes:5}]),Ft=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(b.a)(this,Object(f.a)(t).call(this,e))).getStoryDetails=a.getStoryDetails.bind(Object(C.a)(a)),a.handleUpVoteClick=a.handleUpVoteClick.bind(Object(C.a)(a)),a.handleDownVoteClick=a.handleDownVoteClick.bind(Object(C.a)(a)),a}return Object(y.a)(t,e),Object(h.a)(t,[{key:"handleUpVoteClick",value:function(e){e.upvotes++}},{key:"handleDownVoteClick",value:function(e){e.downvotes++}},{key:"getStoryDetails",value:function(){var e=this;return r.a.createElement(Bt.a,{body:!0},L.a.map(L.a.sortBy(Pt,[function(e){return e.upvotes-e.downvotes}]).reverse(),function(t){return r.a.createElement("div",null,r.a.createElement(Bt.a,{heading:!0},t.title),L.a.map(t.tags,function(e){return r.a.createElement(de.a,{className:"tag",color:"secondary"},e)}),!L.a.isEmpty(t.tags)&&r.a.createElement("br",null),L.a.truncate(t.body),r.a.createElement("br",null),r.a.createElement("i",{onClick:e.handleUpVoteClick(t),class:"fa fa-thumbs-o-up thumb"}),r.a.createElement("i",{onClick:e.handleDownVoteClick(t),class:"fa fa-thumbs-o-down thumb"}),r.a.createElement("hr",null))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("input",{className:"form-control searchBar","data-spy":"affix",placeholder:"Search stories by title or tag name"}),r.a.createElement("div",null,r.a.createElement(Bt.a,null,this.getStoryDetails())))}}]),t}(n.Component),Mt=function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(O.a,{className:"stories-page"},r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,null,"Trending Stories "),r.a.createElement(N.a,null," ",r.a.createElement(ue.a,{className:"create-story",color:"primary"},"Create Story")," "))),r.a.createElement(T.a,null,r.a.createElement(j.a,null,r.a.createElement(N.a,{className:"border-right"},r.a.createElement(Ft,null)),r.a.createElement(N.a,null,r.a.createElement(Ut,null))))))}}]),t}(n.Component),Vt=(a(636),function(e){function t(){return Object(p.a)(this,t),Object(b.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement(g.a,null,r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement(pt,null),r.a.createElement(v.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:_t}),r.a.createElement(E.a,{exact:!0,path:"/stories",component:Mt}),r.a.createElement(E.a,{exact:!0,path:"/about",component:ft}),r.a.createElement(E.a,{exact:!0,path:"/explore/:level/:name/:id",component:De}))))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(637),a(638),a(639),a(640);l.a.render(r.a.createElement(i.a,{store:Object(c.d)(m,Object(c.a)(s.a))},r.a.createElement(Vt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[305,1,2]]]);
//# sourceMappingURL=main.08026fd8.chunk.js.map